<!doctype html><html lang=en><head><meta charset=utf-8><title>å…¶å®ä½ å¹¶ä¸æ‡‚ Unicode</title><meta name=description content="å…¶å®ä½ å¹¶ä¸æ‡‚ Unicode"><meta name=author content="Yubao Liu"><meta name=viewport content="width=device-width,initial-scale=1"><noscript><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel=stylesheet type=text/css><link rel=stylesheet href=/css/fonts.css></noscript><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*//*!normalize.css v | MIT License | https://necolas.github.io/normalize.css/
Copyright (c) Nicolas Gallagher and Jonathan Neal*//*!normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css*/html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}html{font-family:sans-serif}.hidden,[hidden]{display:none !important}.pure-img{max-width:100%;height:auto;display:block}</style><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*/.pure-menu{box-sizing:border-box}.pure-menu-fixed{position:fixed;left:0;top:0;z-index:3}.pure-menu-item,.pure-menu-list{position:relative}.pure-menu-list{list-style:none;margin:0;padding:0}.pure-menu-item{padding:0;margin:0;height:100%}.pure-menu-heading,.pure-menu-link{display:block;text-decoration:none;white-space:nowrap}.pure-menu-horizontal{width:100%;white-space:nowrap}.pure-menu-horizontal .pure-menu-list{display:inline-block}.pure-menu-horizontal .pure-menu-heading,.pure-menu-horizontal .pure-menu-item,.pure-menu-horizontal .pure-menu-separator{display:inline-block;vertical-align:middle}.pure-menu-item .pure-menu-item{display:block}.pure-menu-children{display:none;position:absolute;left:100%;top:0;margin:0;padding:0;z-index:3}.pure-menu-horizontal .pure-menu-children{left:0;top:auto;width:inherit}.pure-menu-active>.pure-menu-children,.pure-menu-allow-hover:hover>.pure-menu-children{display:block;position:absolute}.pure-menu-has-children>.pure-menu-link:after{padding-left:.5em;content:"\25B8";font-size:small}.pure-menu-horizontal .pure-menu-has-children>.pure-menu-link:after{content:"\25BE"}.pure-menu-scrollable{overflow-y:scroll;overflow-x:hidden}.pure-menu-scrollable .pure-menu-list{display:block}.pure-menu-horizontal.pure-menu-scrollable .pure-menu-list{display:inline-block}.pure-menu-horizontal.pure-menu-scrollable{white-space:nowrap;overflow-y:hidden;overflow-x:auto;padding:.5em 0}.pure-menu-horizontal .pure-menu-children .pure-menu-separator,.pure-menu-separator{background-color:#ccc;height:1px;margin:.3em 0}.pure-menu-horizontal .pure-menu-separator{width:1px;height:1.3em;margin:0 .3em}.pure-menu-horizontal .pure-menu-children .pure-menu-separator{display:block;width:auto}.pure-menu-heading{text-transform:uppercase;color:#565d64}.pure-menu-link{color:#777}.pure-menu-children{background-color:#fff}.pure-menu-heading,.pure-menu-link{padding:.5em 1em}.pure-menu-disabled{opacity:.5}.pure-menu-disabled .pure-menu-link:hover{background-color:transparent;cursor:default}.pure-menu-active>.pure-menu-link,.pure-menu-link:focus,.pure-menu-link:hover{background-color:#eee}.pure-menu-selected>.pure-menu-link,.pure-menu-selected>.pure-menu-link:visited{color:#000}</style><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*/.pure-g{display:flex;flex-flow:row wrap;align-content:flex-start}.pure-u{display:inline-block;vertical-align:top}.pure-u-1,.pure-u-1-1,.pure-u-1-12,.pure-u-1-2,.pure-u-1-24,.pure-u-1-3,.pure-u-1-4,.pure-u-1-5,.pure-u-1-6,.pure-u-1-8,.pure-u-10-24,.pure-u-11-12,.pure-u-11-24,.pure-u-12-24,.pure-u-13-24,.pure-u-14-24,.pure-u-15-24,.pure-u-16-24,.pure-u-17-24,.pure-u-18-24,.pure-u-19-24,.pure-u-2-24,.pure-u-2-3,.pure-u-2-5,.pure-u-20-24,.pure-u-21-24,.pure-u-22-24,.pure-u-23-24,.pure-u-24-24,.pure-u-3-24,.pure-u-3-4,.pure-u-3-5,.pure-u-3-8,.pure-u-4-24,.pure-u-4-5,.pure-u-5-12,.pure-u-5-24,.pure-u-5-5,.pure-u-5-6,.pure-u-5-8,.pure-u-6-24,.pure-u-7-12,.pure-u-7-24,.pure-u-7-8,.pure-u-8-24,.pure-u-9-24{display:inline-block;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-1-24{width:4.1667%}.pure-u-1-12,.pure-u-2-24{width:8.3333%}.pure-u-1-8,.pure-u-3-24{width:12.5%}.pure-u-1-6,.pure-u-4-24{width:16.6667%}.pure-u-1-5{width:20%}.pure-u-5-24{width:20.8333%}.pure-u-1-4,.pure-u-6-24{width:25%}.pure-u-7-24{width:29.1667%}.pure-u-1-3,.pure-u-8-24{width:33.3333%}.pure-u-3-8,.pure-u-9-24{width:37.5%}.pure-u-2-5{width:40%}.pure-u-10-24,.pure-u-5-12{width:41.6667%}.pure-u-11-24{width:45.8333%}.pure-u-1-2,.pure-u-12-24{width:50%}.pure-u-13-24{width:54.1667%}.pure-u-14-24,.pure-u-7-12{width:58.3333%}.pure-u-3-5{width:60%}.pure-u-15-24,.pure-u-5-8{width:62.5%}.pure-u-16-24,.pure-u-2-3{width:66.6667%}.pure-u-17-24{width:70.8333%}.pure-u-18-24,.pure-u-3-4{width:75%}.pure-u-19-24{width:79.1667%}.pure-u-4-5{width:80%}.pure-u-20-24,.pure-u-5-6{width:83.3333%}.pure-u-21-24,.pure-u-7-8{width:87.5%}.pure-u-11-12,.pure-u-22-24{width:91.6667%}.pure-u-23-24{width:95.8333%}.pure-u-1,.pure-u-1-1,.pure-u-24-24,.pure-u-5-5{width:100%}</style><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*/.pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td{background-color:#f2f2f2}.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child>td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child>td{border-bottom-width:0}</style><style type=text/css media=screen>/*!Pure v1.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/yahoo/pure/blob/master/LICENSE.md*/@media screen and (min-width:35.5em){.pure-u-sm-1,.pure-u-sm-1-1,.pure-u-sm-1-12,.pure-u-sm-1-2,.pure-u-sm-1-24,.pure-u-sm-1-3,.pure-u-sm-1-4,.pure-u-sm-1-5,.pure-u-sm-1-6,.pure-u-sm-1-8,.pure-u-sm-10-24,.pure-u-sm-11-12,.pure-u-sm-11-24,.pure-u-sm-12-24,.pure-u-sm-13-24,.pure-u-sm-14-24,.pure-u-sm-15-24,.pure-u-sm-16-24,.pure-u-sm-17-24,.pure-u-sm-18-24,.pure-u-sm-19-24,.pure-u-sm-2-24,.pure-u-sm-2-3,.pure-u-sm-2-5,.pure-u-sm-20-24,.pure-u-sm-21-24,.pure-u-sm-22-24,.pure-u-sm-23-24,.pure-u-sm-24-24,.pure-u-sm-3-24,.pure-u-sm-3-4,.pure-u-sm-3-5,.pure-u-sm-3-8,.pure-u-sm-4-24,.pure-u-sm-4-5,.pure-u-sm-5-12,.pure-u-sm-5-24,.pure-u-sm-5-5,.pure-u-sm-5-6,.pure-u-sm-5-8,.pure-u-sm-6-24,.pure-u-sm-7-12,.pure-u-sm-7-24,.pure-u-sm-7-8,.pure-u-sm-8-24,.pure-u-sm-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-sm-1-24{width:4.1667%}.pure-u-sm-1-12,.pure-u-sm-2-24{width:8.3333%}.pure-u-sm-1-8,.pure-u-sm-3-24{width:12.5%}.pure-u-sm-1-6,.pure-u-sm-4-24{width:16.6667%}.pure-u-sm-1-5{width:20%}.pure-u-sm-5-24{width:20.8333%}.pure-u-sm-1-4,.pure-u-sm-6-24{width:25%}.pure-u-sm-7-24{width:29.1667%}.pure-u-sm-1-3,.pure-u-sm-8-24{width:33.3333%}.pure-u-sm-3-8,.pure-u-sm-9-24{width:37.5%}.pure-u-sm-2-5{width:40%}.pure-u-sm-10-24,.pure-u-sm-5-12{width:41.6667%}.pure-u-sm-11-24{width:45.8333%}.pure-u-sm-1-2,.pure-u-sm-12-24{width:50%}.pure-u-sm-13-24{width:54.1667%}.pure-u-sm-14-24,.pure-u-sm-7-12{width:58.3333%}.pure-u-sm-3-5{width:60%}.pure-u-sm-15-24,.pure-u-sm-5-8{width:62.5%}.pure-u-sm-16-24,.pure-u-sm-2-3{width:66.6667%}.pure-u-sm-17-24{width:70.8333%}.pure-u-sm-18-24,.pure-u-sm-3-4{width:75%}.pure-u-sm-19-24{width:79.1667%}.pure-u-sm-4-5{width:80%}.pure-u-sm-20-24,.pure-u-sm-5-6{width:83.3333%}.pure-u-sm-21-24,.pure-u-sm-7-8{width:87.5%}.pure-u-sm-11-12,.pure-u-sm-22-24{width:91.6667%}.pure-u-sm-23-24{width:95.8333%}.pure-u-sm-1,.pure-u-sm-1-1,.pure-u-sm-24-24,.pure-u-sm-5-5{width:100%}}@media screen and (min-width:48em){.pure-u-md-1,.pure-u-md-1-1,.pure-u-md-1-12,.pure-u-md-1-2,.pure-u-md-1-24,.pure-u-md-1-3,.pure-u-md-1-4,.pure-u-md-1-5,.pure-u-md-1-6,.pure-u-md-1-8,.pure-u-md-10-24,.pure-u-md-11-12,.pure-u-md-11-24,.pure-u-md-12-24,.pure-u-md-13-24,.pure-u-md-14-24,.pure-u-md-15-24,.pure-u-md-16-24,.pure-u-md-17-24,.pure-u-md-18-24,.pure-u-md-19-24,.pure-u-md-2-24,.pure-u-md-2-3,.pure-u-md-2-5,.pure-u-md-20-24,.pure-u-md-21-24,.pure-u-md-22-24,.pure-u-md-23-24,.pure-u-md-24-24,.pure-u-md-3-24,.pure-u-md-3-4,.pure-u-md-3-5,.pure-u-md-3-8,.pure-u-md-4-24,.pure-u-md-4-5,.pure-u-md-5-12,.pure-u-md-5-24,.pure-u-md-5-5,.pure-u-md-5-6,.pure-u-md-5-8,.pure-u-md-6-24,.pure-u-md-7-12,.pure-u-md-7-24,.pure-u-md-7-8,.pure-u-md-8-24,.pure-u-md-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-md-1-24{width:4.1667%}.pure-u-md-1-12,.pure-u-md-2-24{width:8.3333%}.pure-u-md-1-8,.pure-u-md-3-24{width:12.5%}.pure-u-md-1-6,.pure-u-md-4-24{width:16.6667%}.pure-u-md-1-5{width:20%}.pure-u-md-5-24{width:20.8333%}.pure-u-md-1-4,.pure-u-md-6-24{width:25%}.pure-u-md-7-24{width:29.1667%}.pure-u-md-1-3,.pure-u-md-8-24{width:33.3333%}.pure-u-md-3-8,.pure-u-md-9-24{width:37.5%}.pure-u-md-2-5{width:40%}.pure-u-md-10-24,.pure-u-md-5-12{width:41.6667%}.pure-u-md-11-24{width:45.8333%}.pure-u-md-1-2,.pure-u-md-12-24{width:50%}.pure-u-md-13-24{width:54.1667%}.pure-u-md-14-24,.pure-u-md-7-12{width:58.3333%}.pure-u-md-3-5{width:60%}.pure-u-md-15-24,.pure-u-md-5-8{width:62.5%}.pure-u-md-16-24,.pure-u-md-2-3{width:66.6667%}.pure-u-md-17-24{width:70.8333%}.pure-u-md-18-24,.pure-u-md-3-4{width:75%}.pure-u-md-19-24{width:79.1667%}.pure-u-md-4-5{width:80%}.pure-u-md-20-24,.pure-u-md-5-6{width:83.3333%}.pure-u-md-21-24,.pure-u-md-7-8{width:87.5%}.pure-u-md-11-12,.pure-u-md-22-24{width:91.6667%}.pure-u-md-23-24{width:95.8333%}.pure-u-md-1,.pure-u-md-1-1,.pure-u-md-24-24,.pure-u-md-5-5{width:100%}}@media screen and (min-width:64em){.pure-u-lg-1,.pure-u-lg-1-1,.pure-u-lg-1-12,.pure-u-lg-1-2,.pure-u-lg-1-24,.pure-u-lg-1-3,.pure-u-lg-1-4,.pure-u-lg-1-5,.pure-u-lg-1-6,.pure-u-lg-1-8,.pure-u-lg-10-24,.pure-u-lg-11-12,.pure-u-lg-11-24,.pure-u-lg-12-24,.pure-u-lg-13-24,.pure-u-lg-14-24,.pure-u-lg-15-24,.pure-u-lg-16-24,.pure-u-lg-17-24,.pure-u-lg-18-24,.pure-u-lg-19-24,.pure-u-lg-2-24,.pure-u-lg-2-3,.pure-u-lg-2-5,.pure-u-lg-20-24,.pure-u-lg-21-24,.pure-u-lg-22-24,.pure-u-lg-23-24,.pure-u-lg-24-24,.pure-u-lg-3-24,.pure-u-lg-3-4,.pure-u-lg-3-5,.pure-u-lg-3-8,.pure-u-lg-4-24,.pure-u-lg-4-5,.pure-u-lg-5-12,.pure-u-lg-5-24,.pure-u-lg-5-5,.pure-u-lg-5-6,.pure-u-lg-5-8,.pure-u-lg-6-24,.pure-u-lg-7-12,.pure-u-lg-7-24,.pure-u-lg-7-8,.pure-u-lg-8-24,.pure-u-lg-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-lg-1-24{width:4.1667%}.pure-u-lg-1-12,.pure-u-lg-2-24{width:8.3333%}.pure-u-lg-1-8,.pure-u-lg-3-24{width:12.5%}.pure-u-lg-1-6,.pure-u-lg-4-24{width:16.6667%}.pure-u-lg-1-5{width:20%}.pure-u-lg-5-24{width:20.8333%}.pure-u-lg-1-4,.pure-u-lg-6-24{width:25%}.pure-u-lg-7-24{width:29.1667%}.pure-u-lg-1-3,.pure-u-lg-8-24{width:33.3333%}.pure-u-lg-3-8,.pure-u-lg-9-24{width:37.5%}.pure-u-lg-2-5{width:40%}.pure-u-lg-10-24,.pure-u-lg-5-12{width:41.6667%}.pure-u-lg-11-24{width:45.8333%}.pure-u-lg-1-2,.pure-u-lg-12-24{width:50%}.pure-u-lg-13-24{width:54.1667%}.pure-u-lg-14-24,.pure-u-lg-7-12{width:58.3333%}.pure-u-lg-3-5{width:60%}.pure-u-lg-15-24,.pure-u-lg-5-8{width:62.5%}.pure-u-lg-16-24,.pure-u-lg-2-3{width:66.6667%}.pure-u-lg-17-24{width:70.8333%}.pure-u-lg-18-24,.pure-u-lg-3-4{width:75%}.pure-u-lg-19-24{width:79.1667%}.pure-u-lg-4-5{width:80%}.pure-u-lg-20-24,.pure-u-lg-5-6{width:83.3333%}.pure-u-lg-21-24,.pure-u-lg-7-8{width:87.5%}.pure-u-lg-11-12,.pure-u-lg-22-24{width:91.6667%}.pure-u-lg-23-24{width:95.8333%}.pure-u-lg-1,.pure-u-lg-1-1,.pure-u-lg-24-24,.pure-u-lg-5-5{width:100%}}@media screen and (min-width:80em){.pure-u-xl-1,.pure-u-xl-1-1,.pure-u-xl-1-12,.pure-u-xl-1-2,.pure-u-xl-1-24,.pure-u-xl-1-3,.pure-u-xl-1-4,.pure-u-xl-1-5,.pure-u-xl-1-6,.pure-u-xl-1-8,.pure-u-xl-10-24,.pure-u-xl-11-12,.pure-u-xl-11-24,.pure-u-xl-12-24,.pure-u-xl-13-24,.pure-u-xl-14-24,.pure-u-xl-15-24,.pure-u-xl-16-24,.pure-u-xl-17-24,.pure-u-xl-18-24,.pure-u-xl-19-24,.pure-u-xl-2-24,.pure-u-xl-2-3,.pure-u-xl-2-5,.pure-u-xl-20-24,.pure-u-xl-21-24,.pure-u-xl-22-24,.pure-u-xl-23-24,.pure-u-xl-24-24,.pure-u-xl-3-24,.pure-u-xl-3-4,.pure-u-xl-3-5,.pure-u-xl-3-8,.pure-u-xl-4-24,.pure-u-xl-4-5,.pure-u-xl-5-12,.pure-u-xl-5-24,.pure-u-xl-5-5,.pure-u-xl-5-6,.pure-u-xl-5-8,.pure-u-xl-6-24,.pure-u-xl-7-12,.pure-u-xl-7-24,.pure-u-xl-7-8,.pure-u-xl-8-24,.pure-u-xl-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-xl-1-24{width:4.1667%}.pure-u-xl-1-12,.pure-u-xl-2-24{width:8.3333%}.pure-u-xl-1-8,.pure-u-xl-3-24{width:12.5%}.pure-u-xl-1-6,.pure-u-xl-4-24{width:16.6667%}.pure-u-xl-1-5{width:20%}.pure-u-xl-5-24{width:20.8333%}.pure-u-xl-1-4,.pure-u-xl-6-24{width:25%}.pure-u-xl-7-24{width:29.1667%}.pure-u-xl-1-3,.pure-u-xl-8-24{width:33.3333%}.pure-u-xl-3-8,.pure-u-xl-9-24{width:37.5%}.pure-u-xl-2-5{width:40%}.pure-u-xl-10-24,.pure-u-xl-5-12{width:41.6667%}.pure-u-xl-11-24{width:45.8333%}.pure-u-xl-1-2,.pure-u-xl-12-24{width:50%}.pure-u-xl-13-24{width:54.1667%}.pure-u-xl-14-24,.pure-u-xl-7-12{width:58.3333%}.pure-u-xl-3-5{width:60%}.pure-u-xl-15-24,.pure-u-xl-5-8{width:62.5%}.pure-u-xl-16-24,.pure-u-xl-2-3{width:66.6667%}.pure-u-xl-17-24{width:70.8333%}.pure-u-xl-18-24,.pure-u-xl-3-4{width:75%}.pure-u-xl-19-24{width:79.1667%}.pure-u-xl-4-5{width:80%}.pure-u-xl-20-24,.pure-u-xl-5-6{width:83.3333%}.pure-u-xl-21-24,.pure-u-xl-7-8{width:87.5%}.pure-u-xl-11-12,.pure-u-xl-22-24{width:91.6667%}.pure-u-xl-23-24{width:95.8333%}.pure-u-xl-1,.pure-u-xl-1-1,.pure-u-xl-24-24,.pure-u-xl-5-5{width:100%}}</style><style type=text/css media=screen>:root{--color:#484848;--color-footnote:#575757;--color-footer-content:#bbb;--background-color:rgb(252, 252, 252);--background-color-code:rgb(240, 240, 240);--background-color-toggle-content:rgb(249, 249, 249);--link-color:#c05b4d;--link-color-hover:#a5473a;--list-link-color:#336699;--border-navbar-and-footer:#e3e3e3}</style><style type=text/css media=screen>html{min-height:100%;width:100%;position:relative}body{background-color:#fcfcfc;background-color:var(--background-color);color:#484848;color:var(--color)}a{text-decoration:none}kbd,pre,code,samp{background-color:#f0f0f0;background-color:var(--background-color-code)}.nav-menu{margin-top:5px;padding-bottom:5px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#e3e3e3;border-bottom-color:var(--border-navbar-and-footer)}.pure-menu-heading{text-transform:none;font-size:large}.pure-menu-link:hover{background-color:unset}.header{text-align:left;color:#484848;color:var(--color);margin-bottom:.5em}.header ul li{height:auto}.header ul li a{font-weight:700;color:#484848;color:var(--color);font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.header{font-weight:700;color:#484848;color:var(--color);font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.site-title{color:#484848;color:var(--color);text-transform:none;font-weight:400;font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.pull-right{float:right}.posts-name{text-transform:capitalize;font-weight:700;padding-left:1em;margin-top:1em;font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.posts{font-family:verdana,arial,helvetica,sans-serif;list-style-type:none;padding-left:1em}.posts li p{margin-top:0}.posts li{margin-bottom:1em}.posts li>a{color:#369;color:var(--list-link-color);text-decoration:none}.post-list{font-size:large}.footnote{font-family:verdana,arial,helvetica,sans-serif;color:#575757;color:var(--color-footnote);font-size:.75em;margin-bottom:0}.footnote a{color:#575757;color:var(--color-footnote)}.footnote a:hover{text-decoration:underline;color:#369;color:var(--list-link-color)}.footer{position:absolute;z-index:2;height:auto;width:100%;bottom:0}.footer-content{border-top-width:1px;border-top-style:solid;border-top-color:#e3e3e3;border-top:1px solid var(--border-navbar-and-footer);font-size:80%;color:#bbb;color:var(--color-footer-content)}.footer-content a{color:#575757;color:var(--color-footnote)}.footer-content ul{height:auto;margin-top:0;margin-bottom:0;display:inline-block;padding-left:0}#TableOfContents>ul{list-style:none;margin:0;padding:0}#gototop-btn{display:inline-block}#foot-name{color:#484848;color:var(--color);text-transform:none}#foot-copyright{padding-left:1em;padding-bottom:.5em;margin:0}.post{font-family:proxima-nova,helvetica neue,Helvetica,Roboto,Arial,sans-serif;color:#484848;color:var(--color);letter-spacing:normal;padding-left:.5em}.post h1,h2,h3,h4,h5,h6{font-weight:700;letter-spacing:normal}.post-content{z-index:9;overflow:auto;padding:0;padding-bottom:3em;font-size:16px;line-height:1.4}.post-content img{max-width:100%;height:auto}.post-content pre{padding:.5em}.post a{color:#c05b4d;color:var(--link-color);text-decoration:none}.post a:hover{color:#a5473a;color:var(--link-color-hover);text-decoration:underline}.post h1{font-size:28px}.post h2{font-size:25px}.post h3{font-size:23px}.post h4{font-size:21px}.post h5{font-size:19px}.post h6{font-size:18px}.post-title{margin-top:0;margin-bottom:1em}.post-title h1{font-weight:700;font-size:39px;line-height:40px;margin-top:0;margin-bottom:0}@media screen and (max-width:768px){.desktop{display:none}.mobile{display:block}#toggle-btn{display:inline-block;float:right;padding:.5em 1em;text-decoration:none;color:#484848;color:var(--color);font-weight:700}#toggle-content li{clear:both;height:auto;background-color:#f9f9f9;background-color:var(--background-color-toggle-content)}#toggle-home{display:inline-block}}@media screen and (min-width:769px){.mobile{display:none}.desktop{display:block}}</style><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon></head><body><div class="header pure-g"><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div><div class="pure-u-11-12 pure-u-md-20-24 pure-u-lg-7-12"><div class="desktop pure-menu pure-menu-horizontal nav-menu"><a href=/ class="site-title pure-menu-heading">éšè®°</a><ul class="pure-menu-list pull-right"><li class=pure-menu-item><a href=/categories/development/ class=pure-menu-link>Development</a></li><li class=pure-menu-item><a href=/categories/os/ class=pure-menu-link>OS</a></li><li class=pure-menu-item><a href=/categories/reading/ class=pure-menu-link>Reading</a></li><li class=pure-menu-item><a href=/about/ class=pure-menu-link>About</a></li></ul></div><div class="mobile pure-menu nav-menu"><a href=/ class="site-title pure-menu-heading" id=toggle-home>éšè®°</a>
<a href=# id=toggle-btn>&#9776;</a><ul class=pure-menu-list id=toggle-content style=display:none><li class=pure-menu-item><a href=/categories/development/ class=pure-menu-link>Development</a></li><li class=pure-menu-item><a href=/categories/os/ class=pure-menu-link>OS</a></li><li class=pure-menu-item><a href=/categories/reading/ class=pure-menu-link>Reading</a></li><li class=pure-menu-item><a href=/about class=pure-menu-link>About</a></li></ul></div></div><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div></div><div class=pure-g><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div><div class="pure-u-11-12 pure-u-md-20-24 pure-u-lg-7-12"><div class=post><div class=post-title><p class=footnote><time datetime="2018-12-31 17:30:00 +0800 CST">2018-12-31
</time>|
tags: [ <a href=/tags/unicode>Unicode</a> ]
categories: [ <a href=/categories/development>Development</a> ]</p><h1>å…¶å®ä½ å¹¶ä¸æ‡‚ Unicode</h1></div><div class=post-content><nav id=TableOfContents><ul><li><a href=#å¯¼è¨€>å¯¼è¨€</a></li><li><a href=#ç¬¬ä¸€å‘surrogate-pair>ç¬¬ä¸€å‘ï¼šsurrogate pair</a></li><li><a href=#ç¬¬äºŒå‘grapheme-cluster>ç¬¬äºŒå‘ï¼šgrapheme cluster</a></li><li><a href=#ç¬¬ä¸‰å‘combining-character>ç¬¬ä¸‰å‘ï¼šcombining character</a></li><li><a href=#ç»“è¯­>ç»“è¯­</a></li></ul></nav><h2 id=å¯¼è¨€>å¯¼è¨€</h2><p>å¤æœ‰ Babel é€šå¤©å¡”ï¼Œä»Šæœ‰ Unicode å­—ç¬¦é›†ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€æ”¯æŒ Unicodeï¼Œç”šè‡³åœ¨è¯­æ³•å±‚é¢ç›´æ¥æ”¯æŒï¼Œç»å¤§éƒ¨åˆ†ç¨‹åºå‘˜å¯èƒ½ä¼šå› æ­¤è§‰å¾—è‡ªå·±æ‡‚ Unicode äº†ï¼Œè‡ªå·±çš„ä»£ç ä¸éœ€è¦ç‰¹åˆ«æ³¨æ„å°±èƒ½å¤„ç†ä¸–ç•Œä¸Šæ‰€æœ‰è¯­è¨€çš„å­—ç¬¦äº†ï¼Œè§‰å¾— Unicode é«˜å¤§ä¸ŠçœŸå–„ç¾ï¼Œå…¶å®å¹¶éå¦‚æ­¤ï¼Œä¸‹é¢è®²è¿°ä¸‹ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ éœ€è¦äº†è§£çš„å‡ ä¸ªå…³é”®æ¦‚å¿µï¼Œé‡Œé¢é¢‡æœ‰å‡ ä¸ªå¤§å‘ï¼Œçœ‹çœ‹å„ä½çŸ¥é“å‡ ä¸ªğŸ˜„</p><h2 id=ç¬¬ä¸€å‘surrogate-pair>ç¬¬ä¸€å‘ï¼šsurrogate pair</h2><p>å…³äº Unicodeã€BMPã€UCS-2ã€UCS-4ã€UTF-8ã€UTF-16ã€UTF-32 çš„æ¦‚å¿µå°±ä¸å†èµ˜è¿°äº†ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šè®²è¿°æå¥½çš„æ–‡ç« ï¼Œè¿™é‡Œé¢æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æœ¯è¯­ï¼š</p><ol><li>code point: æŒ‡ Unicode æ ‡å‡†é‡Œâ€œå­—ç¬¦â€çš„ç¼–å·ï¼Œç›®å‰ Unicode ä½¿ç”¨äº† 0 ~ 0x10FFFF çš„ç¼–ç èŒƒå›´ã€‚è¿™é‡Œå­—ç¬¦äºŒå­—åŠ äº†å¼•å·ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªæ¦‚å¿µå¾ˆæ··æ·†ï¼Œåé¢ä¼šå†è®²è¿°ã€‚</li><li>code unit: æŒ‡æŸç§ Unicode ç¼–ç æ–¹å¼é‡Œç¼–ç ä¸€ä¸ª code point éœ€è¦çš„æœ€å°‘å­—èŠ‚ï¼Œæ¯”å¦‚ UTF-8 éœ€è¦æœ€å°‘ä¸€ä¸ªå­—èŠ‚ï¼ŒUTF-16 æœ€å°‘ä¸¤ä¸ªå­—èŠ‚ï¼ŒUCS-2 ä¸¤ä¸ªå­—èŠ‚ï¼ŒUCS-4 å’Œ UTF-32 å››ä¸ªå­—èŠ‚ï¼Œåé¢ä¸‰ä¸ªæ˜¯å®šé•¿ç¼–ç ã€‚</li></ol><p>æ—©æœŸçš„æ—¶å€™ï¼ŒUnicode åªç”¨åˆ°äº† 0~0xFFFF èŒƒå›´çš„æ•°å­—ç¼–ç ï¼Œè¿™å°±æ˜¯ BMP å­—ç¬¦é›†ï¼ŒUCS-2 ç¼–ç ï¼Œå¾ˆå¤šè¯­è¨€å°±ç”¨ 2 bytes æ¥è¡¨ç¤º wchar_t æˆ–è€… charï¼Œå…¸å‹çš„ä¾‹å­æ˜¯ C/C++/Javaã€‚ä½†åæ¥ Unicode ç»„ç»‡èƒ¡æçæå±…ç„¶ç”¨åˆ°äº†è¶…è¿‡è¿™ä¸ªèŒƒå›´çš„æ•°å­—ï¼Œäºæ˜¯å°±å‡ºæ¥ surrogate pair çš„æ¦‚å¿µäº†ã€‚</p><p>Surrogate pair æ˜¯ä¸“é—¨ç”¨äº UTF-16 çš„ï¼Œä»¥å‘åå…¼å®¹ UCS-2ï¼Œåšæ³•æ˜¯å– UCS-2 èŒƒå›´é‡Œçš„ 0xD800<del>0xDBFF(ç§°ä¸º high surrogates) å’Œ 0xDC00</del>0xDFFF(ç§°ä¸º low surrogates) çš„ code pointï¼Œä¸€ä¸ª high surrogate æ¥ä¸€ä¸ª low surrogate æ‹¼æˆå››ä¸ªå­—èŠ‚è¡¨ç¤ºè¶…å‡º BMP çš„å­—ç¬¦ï¼Œä¸¤ä¸ª surrogate range éƒ½æ˜¯ 1024 ä¸ª code pointï¼Œæ‰€ä»¥ surrogate pair å¯ä»¥è¡¨è¾¾ 1024 x 1024 = 1048576 = 0x100000 ä¸ªå­—ç¬¦ï¼Œè¿™å°±æ˜¯ Unicode çš„å­—ç¬¦é›†èŒƒå›´ä¸Šé™æ˜¯ 0x10FFFF çš„åŸå› ï¼Œä¸ºäº†ç…§é¡¾ UTF-16 ä»¥åŠä¸€å¤§å †é‡‡ç”¨äº† UTF-16 çš„è¯­è¨€ã€æ“ä½œç³»ç»Ÿï¼ˆæ¯”å¦‚ Windowsï¼‰ï¼Œè¿™ä¸ªä¸Šé™ä¸èƒ½çªç ´ï¼Œå“ªæ€• UTF-8 å’Œ UTF-32 å¯ä»¥ç¼–ç æ›´å¤§çš„èŒƒå›´ï¼Œå®åœ¨æ˜¯å†å²æ‚²å‰§ï¼</p><p>é‡‡ç”¨ 2 bytes è¡¨ç¤º wide char çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚ C/C++/Javaï¼Œå°±æœ‰ä¸€ä¸ªå¤§å‘ï¼š</p><ul><li>string çš„é•¿åº¦å¹¶ä¸æ˜¯åˆ‡åˆ†æˆ char æ•°ç»„çš„é•¿åº¦ï¼›</li><li>ç¿»è½¬ string å¹¶ä¸æ˜¯ç®€å•çš„æŠŠ string åˆ‡åˆ†æˆ char æ•°ç»„ç„¶åç¿»è½¬æ•°ç»„å¹¶æ‹¼æ¥ï¼</li></ul><p>Java çš„ String å†…éƒ¨ç”¨çš„ UTF-16 ç¼–ç ï¼Œå…¶ <a href=https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#length()>String.length()</a> <strong>ä¸å¤„ç† surrogate pair</strong>ï¼Œå®ƒç›´æ¥è¿”å› code unit çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ Java çš„ 2 å­—èŠ‚ char çš„ä¸ªæ•°ï¼Œ<strong>å‘æ­»äººä¸èµ”å‘½ï¼</strong></p><p>Java çš„ <a href=https://docs.oracle.com/javase/10/docs/api/java/lang/StringBuilder.html#reverse()>StringBuilder.reverse()</a> å’Œ <a href=https://docs.oracle.com/javase/10/docs/api/java/lang/StringBuffer.html#reverse()>StringBuffer.reverse()</a> åˆ™éƒ½å¯¹ surrogate pair ç‰¹æ®Šå¤„ç†ï¼Œä¼šæŠŠè¿™ä¸ª pair å½“æˆå•ä¸ªå­—ç¬¦çœ‹å¾…ï¼Œå¯å–œå¯è´ºï¼Œä½†æ˜¯æœ‰å¯èƒ½ä¼šæŠŠé surrogate è½¬æˆ surrogate pairï¼Œæ¯”å¦‚ 0xDC00 0xD800 è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨ low surrogate èŒƒå›´ï¼Œç¬¬äºŒä¸ªå­—ç¬¦åœ¨ high surrogate èŒƒå›´ï¼Œç”±äºé¡ºåºä¸ç¬¦åˆ surrogate pair æ ‡å‡†ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸¤ä¸ªç‹¬ç«‹å­—ç¬¦ï¼Œä½†ç¿»è½¬åæˆäº† 0xD800 0xDC00ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆæ³•çš„ surrogate pairï¼Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—ç¬¦ç¿»è½¬æˆäº†ä¸€ä¸ªå­—ç¬¦ï¼Œç­‰ä»·äº <a href=http://www.decodeunicode.org/en/u+10000>0x100000</a>ï¼Œè¿™æ˜¯ surrogate pair è§„åˆ™çš„æ ¹æ·±è’‚å›ºé—®é¢˜ï¼Œå€’ä¹Ÿä¸æ€ª Javaã€‚</p><p>åˆ°è¿™é‡Œï¼Œå¤§å®¶æœ‰æ²¡æœ‰ç†è§£ UCS-2ï¼ŒUTF-16 ä»¥åŠ surrogate pair å¤šä¹ˆé¾Œé¾Šäº†å§ï¼Œæ²¡ç†è§£çš„åŒå­¦è¯·è‡ªè§‰é‡è¯»ã€‚</p><p>æ–°å…´ç¼–ç¨‹è¯­è¨€ Rust çš„è®¾è®¡å¾ˆå¥½ï¼Œå…¶ String æ˜¯ UTF-8 ç¼–ç ï¼Œå…¶ char æ˜¯ UCS-4 ç¼–ç ï¼Œå¹¶ä¸” char æŒ‡çš„æ˜¯ <a href=http://unicode.org/glossary/#unicode_scalar_value>unicode scalar value</a>ï¼Œè¿™ä¸ªæœ¯è¯­æŒ‡å»æ‰ high surrogate å’Œ low surrogate è¿™ 2048 ä¸ª code points åå‰©ä¸‹çš„ code pointsï¼Œè¿™ä¸ªè®¾è®¡éå¸¸å®Œç¾ï¼Œå®Œå…¨é¿å¼€äº† surrogate pairâ€”â€” surrogate pair è¡¨è¾¾çš„å­—ç¬¦å°±ç”¨ 0x10000 ~ 0x100000 èŒƒå›´ç›´æ¥è¡¨è¾¾äº†ã€‚</p><p>ç„¶è€Œï¼ŒRust å¹¶æ²¡æœ‰åšåˆ°æè‡´ï¼Œä¸èƒ½ç›´æ¥åœ¨è¯­è¨€é‡Œå¤„ç† grapheme cluster æ¦‚å¿µï¼Œè€Œæ˜¯è¦å€ŸåŠ©å¤–éƒ¨åº“ï¼Œéå¸¸å¯æƒœã€‚ Grapheme cluster æ¦‚å¿µå°±æ˜¯ Unicode çš„ç¬¬äºŒå¤§å‘ï¼Œä¸”å¬æˆ‘é“æ¥ã€‚</p><h2 id=ç¬¬äºŒå‘grapheme-cluster>ç¬¬äºŒå‘ï¼šgrapheme cluster</h2><p>å€˜è‹¥ä½ å¾ˆç‰›æ°çŸ¥é“ surrogate pairï¼Œæˆ‘çŒœä½ æå¤§æ¦‚ç‡ä¸çŸ¥é“ grapheme cluster è¿™ç©æ„ã€‚å¦‚åŒ phoneme è¿™ä¸ªå•è¯æ˜¯è¡¨ç¤ºå¬è§‰ä¸Šçš„éŸ³ç´ ã€éŸ³ä½ï¼Œè¡¨ç¤ºå¬è§‰ä¸Šå¯ä»¥åˆ†è¾¨çš„æœ€å°å•å…ƒï¼Œ<a href=http://unicode.org/glossary/#grapheme>grapheme</a> è¿™ä¸ªå•è¯è¡¨ç¤ºè§†è§‰ä¸Šçš„å­—ç´ ã€å­—ä½ï¼Œä¹Ÿå°±æ˜¯äººä»¬è¯†åˆ«çš„ã€å£å¤´æŒ‡ç§°çš„â€œå­—ç¬¦â€ï¼Œ<a href=http://unicode.org/glossary/#grapheme_cluster>grapheme cluster</a> å®é™…å°±æ˜¯æŒ‡ graphemeï¼Œæˆ‘æ²¡çœ‹æ‡‚ Unicode glossary ä¸­è¿™ä¿©æœ¯è¯­çš„åŒºåˆ«ã€‚ å¤§æ¦‚æ˜¯ç”±äº <a href=https://unicode.org/reports/tr29/>Unicode Text Segmenation</a> è¿™ä¸ªæ ‡å‡†çš„ç¼˜æ•…ï¼Œç°åœ¨å¤§å®¶ç”¨ grapheme cluster è¿™ä¸ªç§°å‘¼æ›´å¤šã€‚</p><p>ä¸¾ä¸¤ä¸ªä¾‹å­ï¼Œå°åœ°è¯­å¤©åŸæ–‡çš„ à¤¨à¤®à¤¸à¥à¤¤à¥‡ æ˜¯è‹±è¯­ hello çš„æ„æ€ï¼š</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&gt; jshell
</span></span><span style=display:flex><span>|  Welcome to JShell -- Version 11
</span></span><span style=display:flex><span>|  For an introduction type: /help intro
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var s = &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;;
</span></span><span style=display:flex><span>s ==&gt; &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; s.length()
</span></span><span style=display:flex><span>$2 ==&gt; 6
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; s.split(&#34;\\b{g}&#34;)
</span></span><span style=display:flex><span>$3 ==&gt; String[4] { &#34;à¤¨&#34;, &#34;à¤®&#34;, &#34;à¤¸à¥&#34;, &#34;à¤¤à¥‡&#34; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; s.toCharArray()
</span></span><span style=display:flex><span>$4 ==&gt; char[6] { &#39;à¤¨&#39;, &#39;à¤®&#39;, &#39;à¤¸&#39;, &#39;à¥&#39;, &#39;à¤¤&#39;, &#39;à¥‡&#39; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; for (var c : s.toCharArray()) System.out.printf(&#34;%c %X\n&#34;, c, (int)c)
</span></span><span style=display:flex><span>à¤¨ 928
</span></span><span style=display:flex><span>à¤® 92E
</span></span><span style=display:flex><span>à¤¸ 938
</span></span><span style=display:flex><span> à¥ 94D
</span></span><span style=display:flex><span>à¤¤ 924
</span></span><span style=display:flex><span> à¥‡ 947
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå¤©åŸæ–‡å­—ç¬¦ä¸²åŒ…å«äº† 6 ä¸ª UTF-16 code unitsï¼Œ6 ä¸ª Unicode code pointsï¼Œå¹¶ä¸”ä¸æ˜¯ surrogate code pointï¼Œæ‰€ä»¥å®ƒæŒ‰ç†è¯´æ˜¯ 6 ä¸ª &ldquo;Unicode character&rdquo;ã€‚ ä½†å…¶å®å®ƒæ˜¯ 4 ä¸ª grapheme clustersï¼Œä¹Ÿå°±æ˜¯è¯´â€œäººå¯ä»¥è¯†åˆ«çš„ 4 ä¸ªå­—ç¬¦â€ã€‚è¿™é‡Œ \b{g} æ˜¯ JDK 9 æ–°åŠ çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼Œè¡¨ç¤º grapheme cluster è¾¹ç•Œã€‚JDK 8 è¿˜æ–°å¢äº† \X è¡¨ç¤ºä¸€ä¸ª grapheme cluster(è¿™æ˜¯æŠ„çš„ Perl 5 æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼‰ã€‚</p><p>å¦ä¸€ä¸ªå–è‡ª Python åº“ <a href=https://pypi.org/project/grapheme/>grapheme</a> çš„ä¾‹å­ï¼Œè¿™ä¸ªè¯¡å¼‚çš„ä¸‹åˆ’çº¿å•è¯ï¼šuÌ²nÌ²dÌ²eÌ²rÌ²lÌ²iÌ²nÌ²eÌ²dÌ²ï¼Œæ³¨æ„è¿™å¹¶ä¸æ˜¯å¤§å®¶å¸¸è§çš„é‚£ç§ä¸‹åˆ’çº¿ï¼Œè¿™é‡Œçš„ä¸‹åˆ’çº¿æ˜¯å­—ç¬¦æœ¬èº«è‡ªå¸¦çš„ã€‚è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ 10 ä¸ªå­—ç¬¦(grapheme clusters)ï¼Œä½†å®ƒå¯¹åº”äº† 20 ä¸ª Unicode code pointsï¼</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&gt; jshell
</span></span><span style=display:flex><span>|  Welcome to JShell -- Version 11
</span></span><span style=display:flex><span>|  For an introduction type: /help intro
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var s = &#34;uÌ²nÌ²dÌ²eÌ²rÌ²lÌ²iÌ²nÌ²eÌ²dÌ²&#34;;
</span></span><span style=display:flex><span>s ==&gt; &#34;uÌ²nÌ²dÌ²eÌ²rÌ²lÌ²iÌ²nÌ²eÌ²dÌ²&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; s.length()
</span></span><span style=display:flex><span>$2 ==&gt; 20
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; s.split(&#34;\\b{g}&#34;)
</span></span><span style=display:flex><span>$3 ==&gt; String[10] { &#34;uÌ²&#34;, &#34;nÌ²&#34;, &#34;dÌ²&#34;, &#34;eÌ²&#34;, &#34;rÌ²&#34;, &#34;lÌ²&#34;, &#34;iÌ²&#34;, &#34;nÌ²&#34;, &#34;eÌ²&#34;, &#34;dÌ²&#34; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; s.toCharArray()
</span></span><span style=display:flex><span>$4 ==&gt; char[20] { &#39;u&#39;, &#39;Ì²&#39;, &#39;n&#39;, &#39;Ì²&#39;, &#39;d&#39;, &#39;Ì²&#39;, &#39;e&#39;, &#39;Ì²&#39;, &#39;r&#39;, &#39;Ì²&#39;, &#39;l&#39;, &#39;Ì²&#39;, &#39;i&#39;, &#39;Ì²&#39;, &#39;n&#39;, &#39;Ì²&#39;, &#39;e&#39;, &#39;Ì²&#39;, &#39;d&#39;, &#39;Ì²&#39; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; for (var c : s.toCharArray()) System.out.printf(&#34;%c %X\n&#34;, c, (int)c)
</span></span><span style=display:flex><span>u 75
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>n 6E
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>d 64
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>e 65
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>r 72
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>l 6C
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>i 69
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>n 6E
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>e 65
</span></span><span style=display:flex><span> Ì² 332
</span></span><span style=display:flex><span>d 64
</span></span><span style=display:flex><span> Ì² 332
</span></span></code></pre></div><p>è¿™ä¸ªå­—ç¬¦ä¸²ç”¨ Java çš„ new StringBuilder(s).reverse() ç¿»è½¬ï¼Œ<strong>ç»“æœæ˜¯é”™çš„</strong>ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è¯•éªŒä¸‹ã€‚</p><p>å¥½çš„ï¼Œé—®é¢˜æ¥äº†ï¼Œè¦æ€ä¹ˆæ­£ç¡®çš„æŒ‰ç…§ grapheme cluster æ¥ç¿»è½¬è¿™äº›å¥‡ç‰¹çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿæˆ‘ç»™ä¸¤ä¸ªä¾‹å­ï¼Œå¤§å®¶å¯ä»¥å†å‘æŒ¥ä¸‹å„è‡ªå–œçˆ±çš„è¯­è¨€ï¼Œçœ‹ä½ å–œçˆ±çš„è¯­è¨€æ ‡å‡†åŠŸèƒ½èƒ½å¦å¤„ç†ï¼Œæ˜¯å¦è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“â€”â€”è¦å€Ÿç”¨ç¬¬ä¸‰æ–¹åº“æ˜¯æ¯”è¾ƒçŸ¬çš„ï¼Œè€Œå®Œå…¨å¤„ç†ä¸äº†çš„è¯­è¨€åˆ™æ˜¯æœ€çŸ¬çš„ï¼</p><p>ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯ Perl çš„ï¼Œä½œä¸ºæ‹¥æœ‰å²ä¸Šæœ€å¼ºã€å½“ä»Šæœ€å¼ºæ­£åˆ™è¡¨è¾¾å¼å¼•æ“çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒåŒæ ·æ˜¯Unicodeæ”¯æŒå½“ä»Šæœ€å¼ºè¯­è¨€ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼2002 å¹´å‘å¸ƒçš„ Perl 5.8.0 æ˜¯ç¬¬ä¸€ä¸ªæ¨èä½¿ç”¨çš„æ”¯æŒ Unicode çš„ç‰ˆæœ¬ï¼Œåˆ° 2017 å¹´å‘å¸ƒçš„ Perl 5.26.0ï¼Œ2018 å¹´å‘å¸ƒçš„ Perl 5.28.0ï¼Œ<strong>åå…­å¹´</strong>çš„åŠªåŠ›ï¼ŒPerl åœ¨å‘åå…¼å®¹çš„åŒæ—¶ï¼Œåœ¨å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ ‡å‡†åº“ä¸ŠåŸç”Ÿçš„å®Œç¾æ”¯æŒæœ€æ–° Unicode æ ‡å‡†ï¼Œâ€œä½ ä»¬ Python ç²‰å•Šï¼Œå¯¹ Perl çš„åŠ›é‡ä¸€æ— æ‰€çŸ¥ï¼â€</p><p>Perl çš„æ‰‹å†Œé¡µ <a href="https://perldoc.perl.org/perluniintro.html#Perl's-Unicode-Support">perluniintro</a>ã€<a href=https://perldoc.perl.org/perlunicook.html#%211e-32%3a-Reverse-string-by-grapheme>perlunicook</a>ã€<a href=https://perldoc.perl.org/perlunifaq.html>perlunifaq</a> å¯¹å…¶ Unicode æ”¯æŒæœ‰æå¥½çš„ä»‹ç»ï¼Œä¸‹é¢è¿™æ®µä»£ç æ¥è‡ª perlunicookï¼Œæ ¸å¿ƒä»£ç æ˜¯ reverse $s =~ /\X/g è¿™å¥ï¼Œ\X è¡¨ç¤ºåŒ¹é… grapheme clusterã€‚</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&gt; cat a.pl
</span></span><span style=display:flex><span>#!/usr/bin/perl
</span></span><span style=display:flex><span>use utf8;      # so literals and identifiers can be in UTF-8
</span></span><span style=display:flex><span>use v5.12;     # or later to get &#34;unicode_strings&#34; feature
</span></span><span style=display:flex><span>use strict;    # quote strings, declare variables
</span></span><span style=display:flex><span>use warnings;  # on by default
</span></span><span style=display:flex><span>use warnings  qw(FATAL utf8);    # fatalize encoding glitches
</span></span><span style=display:flex><span>use open      qw(:std :encoding(UTF-8)); # undeclared streams in UTF-8
</span></span><span style=display:flex><span>use charnames qw(:full :short);  # unneeded in v5.16
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my $s =  &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;;
</span></span><span style=display:flex><span>my @a = $s =~ /(\X)/g;
</span></span><span style=display:flex><span>print &#34;$s\n&#34;;
</span></span><span style=display:flex><span>print join(&#34; &#34;, @a), &#34;\n&#34;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my $str = join(&#34;&#34;, reverse $s =~ /\X/g);
</span></span><span style=display:flex><span>@a = $str =~ /(\X)/g;
</span></span><span style=display:flex><span>print &#34;$str\n&#34;;
</span></span><span style=display:flex><span>print join(&#34; &#34;, @a), &#34;\n&#34;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; perl a.pl
</span></span><span style=display:flex><span>à¤¨à¤®à¤¸à¥à¤¤à¥‡
</span></span><span style=display:flex><span>à¤¨ à¤® à¤¸à¥ à¤¤à¥‡
</span></span><span style=display:flex><span>à¤¤à¥‡à¤¸à¥à¤®à¤¨
</span></span><span style=display:flex><span>à¤¤à¥‡ à¤¸à¥ à¤® à¤¨
</span></span></code></pre></div><p>Java >= 9 çš„æ”¯æŒä¹Ÿä¸é”™ï¼š</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&gt; jshell
</span></span><span style=display:flex><span>|  Welcome to JShell -- Version 11
</span></span><span style=display:flex><span>|  For an introduction type: /help intro
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; import java.util.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var s = &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;;
</span></span><span style=display:flex><span>s ==&gt; &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var a = Arrays.asList(s.split(&#34;\\b{g}&#34;))
</span></span><span style=display:flex><span>a ==&gt; [à¤¨, à¤®, à¤¸à¥, à¤¤à¥‡]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; Collections.reverse(a)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; String.join(&#34;&#34;, a).split(&#34;\\b{g}&#34;)
</span></span><span style=display:flex><span>$5 ==&gt; String[4] { &#34;à¤¤à¥‡&#34;, &#34;à¤¸à¥&#34;, &#34;à¤®&#34;, &#34;à¤¨&#34; }
</span></span></code></pre></div><p>é™¤äº†ç”¨ \b{g}ï¼Œä¹Ÿå¯ä»¥ç”¨ Java 8 çš„ \X ä»¥åŠ java.util.regex.Pattern ç±»å¤„ç†, æˆ–è€… java.text.BreakIterator:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&gt; jshell
</span></span><span style=display:flex><span>|  Welcome to JShell -- Version 11
</span></span><span style=display:flex><span>|  For an introduction type: /help intro
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; import java.util.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; import java.text.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var s = &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;;
</span></span><span style=display:flex><span>s ==&gt; &#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var iter = BreakIterator.getCharacterInstance(Locale.US);
</span></span><span style=display:flex><span>iter ==&gt; [checksum=0xee8de505]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; iter.setText(s);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; var end = iter.last();
</span></span><span style=display:flex><span>end ==&gt; 4
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell&gt; for (var start = iter.previous(); start != BreakIterator.DONE; end = start, start = iter.previous()) System.out.println(s.substring(start, end))
</span></span><span style=display:flex><span>à¤¤à¥‡
</span></span><span style=display:flex><span>à¤¸à¥
</span></span><span style=display:flex><span>à¤®
</span></span><span style=display:flex><span>à¤¨
</span></span></code></pre></div><p>ç»¼ä¸Šï¼Œ<strong>ä¸€ä¸ª Unicode native çš„ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ char ç±»å‹åº”è¯¥è‡³å°‘æ˜¯ 4 bytesï¼Œå…¶å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼åº”è¯¥èƒ½ä»¥ grapheme cluster ä¸ºâ€œå­—ç¬¦â€å•ä½</strong>ã€‚</p><p>ä»å¤è‡³ä»Šï¼Œç¼–ç¨‹è¯­è¨€å±‚å‡ºä¸ç©·ï¼Œä½†åœ¨ string ç±»å‹ç›´æ¥è€ƒè™‘ grapheme cluster çš„å‡¤æ¯›éºŸè§’ï¼Œè¿™å…¶ä¸­ <a href=http://erlang.org/doc/man/string.html>Erlang</a> è¯­è¨€ä»¥åŠåŸºäº Erlang çš„ <a href=https://hexdocs.pm/elixir/String.html>Elixir</a> è¯­è¨€å°±æ˜¯è¿™ä¸ªå‡¤æ¯›éºŸè§’â€”â€”â€œä½ ä»¬ Go ç²‰å•Šï¼Œå¯¹ Erlang çš„åŠ›é‡ä¸€æ— æ‰€çŸ¥ï¼â€œ</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&gt; erl
</span></span><span style=display:flex><span>Erlang/OTP 20 [erts-9.1.5] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:10] [hipe] [kernel-poll:false] [dtrace]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Eshell V9.1.5  (abort with ^G)
</span></span><span style=display:flex><span>1&gt; Reverse = string:reverse(&#34;à¤¨à¤®à¤¸à¥à¤¤à¥‡&#34;).
</span></span><span style=display:flex><span>[[2340,2375],[2360,2381],2350,2344]
</span></span><span style=display:flex><span>2&gt; io:format(&#34;~ts~n&#34;,[Reverse]).
</span></span><span style=display:flex><span>à¤¤à¥‡à¤¸à¥à¤®à¤¨
</span></span><span style=display:flex><span>ok
</span></span><span style=display:flex><span>3&gt;
</span></span></code></pre></div><p>åœ¨å¯¹å¾… grapheme cluster ä¸Šï¼ŒmacOSã€Windows éƒ½æ²¡èƒ½å¹¸å…ï¼Œåœ¨ macOS Safariã€notesã€Chromeã€MS Word ä»¥åŠ Windows ä¸Šçš„ Notepad è¯•éªŒåå‘ç°ï¼Œå®ƒä»¬å¯¹äº à¤¨à¤®à¤¸à¥à¤¤à¥‡ çš„å¤„ç†éå¸¸å¥‡æ€ªï¼š</p><ul><li>ä¸»çª—å£çš„æ–‡æœ¬è¾“å…¥æ¡†é‡Œï¼Œä»å…‰æ ‡ç§»åŠ¨ä¸Šçœ‹ï¼Œå®ƒä»¬æŠŠè¿™ä¸ªå­—ç¬¦ä¸²è®¤ä¸ºæ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼Œåœ¨ Safari å’Œ Chrome çš„åœ°å€æ è¾“å…¥æ¡†é‡Œï¼Œä»å…‰æ ‡ç§»åŠ¨ä¸Šçœ‹ï¼Œå®ƒä¿©è®¤ä¸ºè¿™æ˜¯å››ä¸ªå­—ç¬¦ï¼›</li><li>ä»è¿™ä¸ªå­—ç¬¦ä¸²æœ«å°¾æŒ‰ Delete(mac) or Backspace(Windows) åˆ é™¤ï¼Œéœ€è¦æŒ‰å…­æ¬¡æ‰èƒ½åˆ å®Œï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‰å…­ä¸ª code point å¤„ç†çš„ï¼›</li><li>ä»è¿™ä¸ªå­—ç¬¦ä¸²å¼€å¤´æŒ‰ Fn-Delete(mac) or Delete(Windows)åˆ é™¤ï¼Œåªéœ€è¦æŒ‰ä¸‰æ¬¡å°±èƒ½åˆ å®Œï¼Œä¸çŸ¥é“ä»€ä¹ˆé¬¼ï¼›</li></ul><p>è”ç³»åˆ° glyph çš„æ¸²æŸ“æœ¬èº«åˆæ˜¯ä¸€å¤§å‘ï¼Œæœ‰ ligature è¿™ç§å¥‡è‘©ç©æ„ï¼Œæˆ‘åªèƒ½åº†å¹¸æˆ‘æ²¡è¿›å…¥å‰ç«¯å¼€å‘é¢†åŸŸğŸ˜„</p><p>OK, åˆ°è¿™é‡Œä¼°è®¡ä½ ä»¬å¯¹ Unicode å·²ç»ç´¯è§‰ä¸çˆ±äº†ï¼Œä¸å¥½æ„æ€ï¼Œæ²¡å®Œï¼Œå’±å†çœ‹ Unicode ç¬¬ä¸‰å‘ã€‚</p><h2 id=ç¬¬ä¸‰å‘combining-character>ç¬¬ä¸‰å‘ï¼šcombining character</h2><p>ä»ä¸Šé¢ä¸¤å‘æˆ‘ä»¬å­¦ä¹ åˆ°ï¼Œæœ‰ä¸¤ä¸ª surrogate code point ç»„æˆä¸€ä¸ª"å­—ç¬¦"(unicode scalar value)ï¼Œæœ‰å¤šä¸ª unicode scalar value ç»„æˆä¸€ä¸ªâ€œå­—ç¬¦â€(grapheme cluster)ï¼Œä½†å…¶å®è¿˜æœ‰ä¸€ç§æƒ…å†µï¼šä¸€ä¸ª Unicode å­—ç¬¦æœ‰å¤šç§è¡¨ç¤ºå½¢å¼ï¼Œå•ä¸ª code point è¡¨ç¤ºä»¥åŠå¤šä¸ªé surrogate code points çš„ç»„åˆå½¢å¼ã€‚</p><p>å‡ºç°è¿™ç§ç»„åˆçš„åŸå› ä¸»è¦æ˜¯å˜éŸ³ç¬¦å·(diacritical marks)ï¼Œè¿™é‡Œé¢åŒ…å«äº†é‡éŸ³ç¬¦å·(accent)ï¼Œè¿™æ˜¯æ¥è‡ª<a href=https://en.wikipedia.org/wiki/Combining_character>ç»´åŸºç™¾ç§‘</a>çš„ä¸€å¼ è¡¨ï¼š</p><p><img src=combining-diacritical-marks.jpg alt="Combining Diacritical Marks"></p><p>å¾ˆå¤šè¯­è¨€é‡Œéƒ½æœ‰è¿™ç§å¸¦å˜éŸ³ç¬¦å·çš„å­—æ¯ï¼Œæ¯”å¦‚ <strong>HeÌŠllÃ¶</strong> é‡Œé¢å¾ˆä¸ªæ€§çš„ e å’Œ oï¼Œæ¯”å¦‚ä¸‹é¢è¿™å¼ æµ·æŠ¥ï¼š</p><p><img src=i-wish-the-english-language-had-more-interesting-characters.jpg alt="I wish the English language had more interesting characters"></p><p>ä¸ºä»€ä¹ˆè¦æœ‰ç»„åˆå­—ç¬¦å‘¢ï¼Ÿå› ä¸ºå¤§å®¶éƒ½æƒ³ç»™æŸä¸ªå­—ç¬¦åŠ å„ç§å˜éŸ³ç¬¦å·ï¼Œå¦‚æœç»™æ¯ä¸ªç»„åˆéƒ½ç”³è¯·ä¸€ä¸ª code pointï¼Œé‚£ææ€• Unicode 0x10FFFF ä¸ª code point æ²¡å¤šä¹…å°±ç”¨å…‰äº†ï¼Œå¤§å®¶ä¹Ÿæ²¡æœºä¼šåƒé¥±äº†æ’‘çš„å¾€ Unicode é‡ŒåŠ  emoji å­—ç¬¦äº†ã€‚ã€‚ã€‚æ®è¯´éŸ©å›½äººå¾ˆç²¾æ˜ï¼Œä»–ä»¬ç»™éŸ©æ–‡çš„ç»„åˆå­—ç¬¦ç”³è¯·äº†å•ç‹¬çš„ code pointï¼Œè€Œå°åº¦äººæ²¡å¤ªåœ¨æ„è¿™äº‹ğŸ˜„</p><p>æ›´å‘çˆ¹çš„æ˜¯ï¼Œæ‹‰ä¸å­—æ¯é‡Œå¸¦å˜éŸ³ç¬¦å·çš„å­—ç¬¦ä½¿ç”¨å¹¿æ³›ï¼Œæ—©å·²ç»å•ç‹¬æ”¶å…¥ Unicode é‡Œäº†ï¼Œæ‰€ä»¥å‡ºç°ä¸€ä¸ª Unicode å­—ç¬¦ä¼šæœ‰å¤šç§ code point è¡¨ç¤ºçš„æƒ…å†µï¼Œä¹Ÿå°±ç‰µæ¶‰åˆ°Unicode æ ‡å‡† <a href=http://unicode.org/reports/tr15/>Unicode normalization forms</a>ï¼Œè¿™å°±æ˜¯ Perl çš„å†…ç½®æ ‡å‡†æ¨¡å— <a href=https://perldoc.perl.org/Unicode/Normalize.html>Unicode::Normalize</a> çš„ç”¨é€”ï¼Œåªæœ‰ normalization ä¹‹åï¼Œåœ¨ä»£ç é‡Œæ‰èƒ½ç”¨æ™®é€šçš„ &ldquo;==&rdquo; æ“ä½œç¬¦æˆ–è€… &ldquo;equals()&rdquo; æ–¹æ³•ç­‰å¯é çš„åˆ¤æ–­ Unicode å­—ç¬¦ã€å­—ç¬¦ä¸²çš„ç­‰ä»·ã€‚</p><p>Unicode å®šä¹‰äº†ä¸¤ç§ç­‰ä»·å…³ç³»ï¼šcanonical equivalence å’Œ compatibility equivalenceï¼Œå‰è€…ä¸¥æ ¼ã€ä¿å®ˆï¼ŒæŒ‡ç»„åˆå‰åçš„å­—ç¬¦åœ¨æ˜¾ç¤ºä¸Šæ˜¯ç›¸åŒçš„ï¼Œåè€…åˆ™å®½æ³›ã€æ¿€è¿›ï¼Œæ˜¾ç¤ºä¸Šä¸åŒä½†è®¤ä¸ºæ˜¯ç­‰ä»·å­—ç¬¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=examples-of-canonical-equivalence.jpg alt="Examples of Canonical Equivalence"></p><p><img src=examples-of-compatibility-equivalence.jpg alt="Examples of Compatibility Equivalence"></p><p>ä¸¤ç§ç­‰ä»·æ–¹å¼å¸¦æ¥å››ç§ normalization form:</p><ul><li>Canonical Equivalence<ul><li>Normalization Form D (NFD): æŠŠå• code point è¡¨ç¤ºçš„å­—ç¬¦æ‹†å¼€(Decompose)æˆå¤šä¸ª code point è¡¨ç¤ºå½¢å¼ï¼Œå¹¶å¯¹ä¸€ä¸ªå­—ç¬¦çš„å¤šä¸ª code point è¿›è¡Œè§„èŒƒæ’åºï¼ˆæ¯”å¦‚ä¸€ä¸ªå­—ç¬¦ä¸Šä¸‹å„æœ‰ä¸€ä¸ªç‚¹ï¼Œé‚£ä¹ˆæ€»å¾—æœ‰ä¸€ä¸ªç‚¹å¯¹åº”çš„ code point æ’åœ¨å¦ä¸€ä¸ªç‚¹å¯¹åº”çš„ code point å‰é¢ï¼‰ï¼›</li><li>Normalization Form C(NFC)ï¼šæŠŠå¤šä¸ª code point å½¢å¼ç»„åˆï¼ˆcomposeï¼‰æˆå• code point å½¢å¼ï¼Œå¦‚æœæ²¡æœ‰å• code point å½¢å¼ï¼Œåˆ™åšä¸€ä¸ªæ­£è§„æ’åº</li></ul></li><li>Compatibility Equivalence<ul><li>Normalization Form KD(NFKD): è¿™é‡Œçš„ K æŒ‡ Compatibilityã€‚æ„ä¹‰ä¸ NFD ç±»ä¼¼ã€‚</li><li>Normalization Form KC(NFKC): æ„ä¹‰ä¸ NFC ç±»ä¼¼ã€‚</li></ul></li></ul><p>è¿™å››ç§ normalization form å¯¹åº” Perl æ ‡å‡†æ¨¡å— <a href=https://perldoc.perl.org/Unicode/Normalize.html>Unicode::Normalize</a> é‡Œå››ä¸ªåŒåå‡½æ•°ã€‚ç”¨æ³•æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>å¦‚æœä½ çš„ä¸šåŠ¡é€»è¾‘éœ€è¦æ¯”è¾ƒä¸¥çš„ç­‰ä»·å˜æ¢ï¼Œé‚£ä¹ˆå¯¹å¤–éƒ¨è¾“å…¥æ–‡æœ¬å…ˆåš NFDï¼Œè¿™ä¸ªæ„å›¾æ˜¯æŠŠ â„« (A ä¸Šä¸€ä¸ªå°åœ†åœˆï¼‰å˜æˆ A + å°åœ†åœˆï¼Œè¿™æ ·åœ¨æ’åºç­‰åœºåˆç¬¦åˆç›´è§‰ï¼Œç„¶ååœ¨å¤„ç†å®Œå NFCï¼ŒæŠŠç»„åˆå­—ç¬¦å°½å¯èƒ½å˜æˆå•ä¸ª code pointï¼Œä»¥èŠ‚çº¦å­˜å‚¨ã€‚</li><li>å¦‚æœä½ çš„ä¸šåŠ¡é€»è¾‘éœ€è¦æ¯”è¾ƒå®½çš„ç­‰ä»·å˜åŒ–ï¼Œé‚£ä¹ˆç±»ä¼¼ï¼Œè¾“å…¥ç»è¿‡ NFKDï¼Œä¸šåŠ¡å¤„ç†ï¼Œç„¶åç»è¿‡ NFKCï¼Œè¾“å‡ºã€‚</li></ol><p>è¿™ä¸ªç”¨æ³•åœ¨ perlunicook çš„ <a href=https://perldoc.perl.org/perlunicook.html#%211e-1%3a-Generic-Unicode-savvy-filter>Generic Unicode-savvy filter</a>ä¸€èŠ‚æœ‰è®²åˆ°ã€‚</p><p>æœ‰ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œ<strong>åŒä¸€ä¸ª Unicode stringï¼Œç»è¿‡ NFD å† NFC åï¼Œå…¶æœªå¿…ç­‰äºåŸå§‹å­—ç¬¦ä¸²</strong>ï¼ŒåŸå› æ˜¯æœ‰çš„åŒä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨ Unicode ä¸­æœ‰å¤šä¸ªå• code point è¡¨ç¤ºï¼Œä¹Ÿè®¸æ˜¯è§„èŒƒåˆ¶å®šè¿‡ç¨‹ä¸­å‚ä¸äººå‘˜å¤ªå¤šã€å­—ç¬¦å¤ªå¤šã€å†æ—¶å¤ªé•¿å¯¼è‡´çš„å¤±è¯¯æˆ–è€…å…¼å®¹æ€§è€ƒè™‘ã€‚ä¸‹é¢æ˜¯ <a href=http://unicode.org/reports/tr15/#Norm_Forms>Unicode Normalization Forms</a>æ ‡å‡†ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼š</p><p><img src=unicode-singletons.jpg alt="Unicode Singletons"></p><h2 id=ç»“è¯­>ç»“è¯­</h2><p>æ­å–œæ‚¨çœ‹åˆ°è¿™é‡Œï¼Œæ„Ÿè°¢æ‚¨çš„è€å¿ƒï¼Œæ‚¨çš„ Unicode æŠ€èƒ½æ°´å¹³æ‰“è´¥å…¨çƒ 99.99% çš„ç¨‹åºå‘˜äº†ï¼Œä»æ­¤ä»¥åï¼Œæ‚¨å¯ä»¥åº•æ°”åè¶³çš„è·Ÿäººè¯´â€œä½ è¿™è¯­è¨€ or è½¯ä»¶çš„ Unicode æ”¯æŒå¾ˆçƒ‚å˜›ï¼Œæ°´å¹³ä¸è¡Œå•Šâ€ï¼å…¶å®æ˜¨å¤©ä¹‹å‰æˆ‘ä¹Ÿä¸çŸ¥é“ surrogate pair ä¹‹åçš„å‘ï¼Œåœ¨é˜…è¯» The Rust Programming Language ä¸€ä¹¦æ—¶äº†è§£åˆ° grapheme cluster çš„æ¦‚å¿µï¼Œç„¶åç ”ç©¶ä¹‹ä¸‹å‘ç°é“é“è¿˜æŒºå¤šğŸ¤¦â€â™‚ï¸ä¸è¿‡è¯è¯´æ¥ï¼Œè™½ç„¶ Unicode ç»†èŠ‚å‘æ­»äººï¼Œä¾ç„¶ä¸å¦¨ç¢å®ƒæ˜¯äººç±»ä¿¡æ¯æŠ€æœ¯å†å²ä¸Šä¼Ÿå¤§çš„é€šå¤©å¡”ï¼ŒåŠŸå¾·æ— é‡ï¼è€Œéšç€ emoji å­—ç¬¦çš„ç››è¡Œï¼Œè·¨æ–‡åŒ–äº¤æµçš„ç››è¡Œï¼Œå¤§å®¶ä½¿ç”¨çš„ã€ç¼–å†™çš„è½¯ä»¶è¿˜æ˜¯ä¼šæ—¶ä¸æ—¶é‡åˆ°è¿™äº›å‘çš„ï¼Œæ¯”å¦‚ç¼–è¾‘å™¨ã€ç»ˆç«¯æ¨¡æ‹Ÿå™¨é‡Œçš„å­—ç¬¦å¯¹é½ã€‚</p><p>æœ€åï¼Œå®‰åˆ©ä¸‹ Rust è¯­è¨€ï¼Œå¦‚ä»Š Rust 1.31.1 å·²ç»å‘å¸ƒï¼Œè¯­æ³•è¶‹äºæˆç†Ÿï¼Œâ€œä¸€ç™¾ç§æŒ‡é’ˆçš„å†™æ³•â€æ—¶ä»£å·²ç»æˆä¸ºè¿‡å»ï¼ˆå¯æ€œ 2015 å¹´ Rust 1.0 å‘å¸ƒï¼Œ2017 å¹´åº•æ‰ç®—è¯­æ³•è¶‹äºå°˜åŸƒè½å®šï¼‰ï¼Œè¿™æ˜¯ä¸€ä»½æ·±æ€ç†Ÿè™‘äº†å…«å¹´çš„ Better C++ï¼Œåœ¨ C++ ä¸€è„‰çš„é›¶å¼€é”€æŠ½è±¡ä¸Šå†ä¸Šä¸€å±‚æ¥¼ï¼ŒåŒæ—¶æä¾›æé«˜çš„å†…å­˜å®‰å…¨æ€§ï¼Œå†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Œè¿è¡Œæ•ˆç‡ï¼Œæ‚¨å¯ä»¥å…¥æ‰‹å¼€å§‹è½®äº†ï¼Œç¥æ„¿ Rust åœ¨å°å·¥å…·ã€é«˜æ€§èƒ½ä½å»¶è¿ŸæœåŠ¡ç«¯ã€æ¸¸æˆã€å¤§æ•°æ®ã€ç§‘å­¦è®¡ç®—ç­‰ç­‰é¢†åŸŸå‘å…‰å‘çƒ­ï¼Œä¹Ÿç®— Mozilla æ³‰ä¸‹ç‘ç›®äº†ğŸ˜„</p></div></div></div><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div></div><div class="footer pure-g"><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div><div class="pure-u-11-12 pure-u-md-20-24 pure-u-lg-7-12"><div class=footer-content><div class="pure-menu pure-menu-horizontal"><ul><li class=pure-menu-item id=foot-name>Â© Yubao Liu</li></ul><a href=# class="pure-menu-link pull-right" id=gototop-btn>â†‘â†‘</a></div></div></div><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div></div><script type=text/javascript>go(),window.addEventListener("resize",go);function go(){var e=document.querySelector(".desktop");document.documentElement.clientWidth>768?e.style.display="":e.style.display="none"}</script><script type=text/javascript>var a=document.querySelector("#toggle-btn"),b=document.querySelector("#toggle-content");a.addEventListener("click",function(){""==b.style.display?(b.style.display="none",a.innerHTML="â˜°"):(b.style.display="",a.innerHTML="X")})</script></body></html>