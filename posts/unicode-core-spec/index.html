<!doctype html><html lang=en><head><meta charset=utf-8><title>Unicode 11.0 核心规范笔记</title><meta name=description content="Unicode 11.0 核心规范笔记"><meta name=author content="Yubao Liu"><meta name=viewport content="width=device-width,initial-scale=1"><noscript><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel=stylesheet type=text/css><link rel=stylesheet href=/css/fonts.css></noscript><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*//*!normalize.css v | MIT License | https://necolas.github.io/normalize.css/
Copyright (c) Nicolas Gallagher and Jonathan Neal*//*!normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css*/html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}html{font-family:sans-serif}.hidden,[hidden]{display:none !important}.pure-img{max-width:100%;height:auto;display:block}</style><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*/.pure-menu{box-sizing:border-box}.pure-menu-fixed{position:fixed;left:0;top:0;z-index:3}.pure-menu-item,.pure-menu-list{position:relative}.pure-menu-list{list-style:none;margin:0;padding:0}.pure-menu-item{padding:0;margin:0;height:100%}.pure-menu-heading,.pure-menu-link{display:block;text-decoration:none;white-space:nowrap}.pure-menu-horizontal{width:100%;white-space:nowrap}.pure-menu-horizontal .pure-menu-list{display:inline-block}.pure-menu-horizontal .pure-menu-heading,.pure-menu-horizontal .pure-menu-item,.pure-menu-horizontal .pure-menu-separator{display:inline-block;vertical-align:middle}.pure-menu-item .pure-menu-item{display:block}.pure-menu-children{display:none;position:absolute;left:100%;top:0;margin:0;padding:0;z-index:3}.pure-menu-horizontal .pure-menu-children{left:0;top:auto;width:inherit}.pure-menu-active>.pure-menu-children,.pure-menu-allow-hover:hover>.pure-menu-children{display:block;position:absolute}.pure-menu-has-children>.pure-menu-link:after{padding-left:.5em;content:"\25B8";font-size:small}.pure-menu-horizontal .pure-menu-has-children>.pure-menu-link:after{content:"\25BE"}.pure-menu-scrollable{overflow-y:scroll;overflow-x:hidden}.pure-menu-scrollable .pure-menu-list{display:block}.pure-menu-horizontal.pure-menu-scrollable .pure-menu-list{display:inline-block}.pure-menu-horizontal.pure-menu-scrollable{white-space:nowrap;overflow-y:hidden;overflow-x:auto;padding:.5em 0}.pure-menu-horizontal .pure-menu-children .pure-menu-separator,.pure-menu-separator{background-color:#ccc;height:1px;margin:.3em 0}.pure-menu-horizontal .pure-menu-separator{width:1px;height:1.3em;margin:0 .3em}.pure-menu-horizontal .pure-menu-children .pure-menu-separator{display:block;width:auto}.pure-menu-heading{text-transform:uppercase;color:#565d64}.pure-menu-link{color:#777}.pure-menu-children{background-color:#fff}.pure-menu-heading,.pure-menu-link{padding:.5em 1em}.pure-menu-disabled{opacity:.5}.pure-menu-disabled .pure-menu-link:hover{background-color:transparent;cursor:default}.pure-menu-active>.pure-menu-link,.pure-menu-link:focus,.pure-menu-link:hover{background-color:#eee}.pure-menu-selected>.pure-menu-link,.pure-menu-selected>.pure-menu-link:visited{color:#000}</style><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*/.pure-g{display:flex;flex-flow:row wrap;align-content:flex-start}.pure-u{display:inline-block;vertical-align:top}.pure-u-1,.pure-u-1-1,.pure-u-1-12,.pure-u-1-2,.pure-u-1-24,.pure-u-1-3,.pure-u-1-4,.pure-u-1-5,.pure-u-1-6,.pure-u-1-8,.pure-u-10-24,.pure-u-11-12,.pure-u-11-24,.pure-u-12-24,.pure-u-13-24,.pure-u-14-24,.pure-u-15-24,.pure-u-16-24,.pure-u-17-24,.pure-u-18-24,.pure-u-19-24,.pure-u-2-24,.pure-u-2-3,.pure-u-2-5,.pure-u-20-24,.pure-u-21-24,.pure-u-22-24,.pure-u-23-24,.pure-u-24-24,.pure-u-3-24,.pure-u-3-4,.pure-u-3-5,.pure-u-3-8,.pure-u-4-24,.pure-u-4-5,.pure-u-5-12,.pure-u-5-24,.pure-u-5-5,.pure-u-5-6,.pure-u-5-8,.pure-u-6-24,.pure-u-7-12,.pure-u-7-24,.pure-u-7-8,.pure-u-8-24,.pure-u-9-24{display:inline-block;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-1-24{width:4.1667%}.pure-u-1-12,.pure-u-2-24{width:8.3333%}.pure-u-1-8,.pure-u-3-24{width:12.5%}.pure-u-1-6,.pure-u-4-24{width:16.6667%}.pure-u-1-5{width:20%}.pure-u-5-24{width:20.8333%}.pure-u-1-4,.pure-u-6-24{width:25%}.pure-u-7-24{width:29.1667%}.pure-u-1-3,.pure-u-8-24{width:33.3333%}.pure-u-3-8,.pure-u-9-24{width:37.5%}.pure-u-2-5{width:40%}.pure-u-10-24,.pure-u-5-12{width:41.6667%}.pure-u-11-24{width:45.8333%}.pure-u-1-2,.pure-u-12-24{width:50%}.pure-u-13-24{width:54.1667%}.pure-u-14-24,.pure-u-7-12{width:58.3333%}.pure-u-3-5{width:60%}.pure-u-15-24,.pure-u-5-8{width:62.5%}.pure-u-16-24,.pure-u-2-3{width:66.6667%}.pure-u-17-24{width:70.8333%}.pure-u-18-24,.pure-u-3-4{width:75%}.pure-u-19-24{width:79.1667%}.pure-u-4-5{width:80%}.pure-u-20-24,.pure-u-5-6{width:83.3333%}.pure-u-21-24,.pure-u-7-8{width:87.5%}.pure-u-11-12,.pure-u-22-24{width:91.6667%}.pure-u-23-24{width:95.8333%}.pure-u-1,.pure-u-1-1,.pure-u-24-24,.pure-u-5-5{width:100%}</style><style type=text/css media=screen>/*!Pure v3.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/pure-css/pure/blob/master/LICENSE*/.pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td{background-color:#f2f2f2}.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child>td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child>td{border-bottom-width:0}</style><style type=text/css media=screen>/*!Pure v1.0.0
Copyright 2013 Yahoo!
Licensed under the BSD License.
https://github.com/yahoo/pure/blob/master/LICENSE.md*/@media screen and (min-width:35.5em){.pure-u-sm-1,.pure-u-sm-1-1,.pure-u-sm-1-12,.pure-u-sm-1-2,.pure-u-sm-1-24,.pure-u-sm-1-3,.pure-u-sm-1-4,.pure-u-sm-1-5,.pure-u-sm-1-6,.pure-u-sm-1-8,.pure-u-sm-10-24,.pure-u-sm-11-12,.pure-u-sm-11-24,.pure-u-sm-12-24,.pure-u-sm-13-24,.pure-u-sm-14-24,.pure-u-sm-15-24,.pure-u-sm-16-24,.pure-u-sm-17-24,.pure-u-sm-18-24,.pure-u-sm-19-24,.pure-u-sm-2-24,.pure-u-sm-2-3,.pure-u-sm-2-5,.pure-u-sm-20-24,.pure-u-sm-21-24,.pure-u-sm-22-24,.pure-u-sm-23-24,.pure-u-sm-24-24,.pure-u-sm-3-24,.pure-u-sm-3-4,.pure-u-sm-3-5,.pure-u-sm-3-8,.pure-u-sm-4-24,.pure-u-sm-4-5,.pure-u-sm-5-12,.pure-u-sm-5-24,.pure-u-sm-5-5,.pure-u-sm-5-6,.pure-u-sm-5-8,.pure-u-sm-6-24,.pure-u-sm-7-12,.pure-u-sm-7-24,.pure-u-sm-7-8,.pure-u-sm-8-24,.pure-u-sm-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-sm-1-24{width:4.1667%}.pure-u-sm-1-12,.pure-u-sm-2-24{width:8.3333%}.pure-u-sm-1-8,.pure-u-sm-3-24{width:12.5%}.pure-u-sm-1-6,.pure-u-sm-4-24{width:16.6667%}.pure-u-sm-1-5{width:20%}.pure-u-sm-5-24{width:20.8333%}.pure-u-sm-1-4,.pure-u-sm-6-24{width:25%}.pure-u-sm-7-24{width:29.1667%}.pure-u-sm-1-3,.pure-u-sm-8-24{width:33.3333%}.pure-u-sm-3-8,.pure-u-sm-9-24{width:37.5%}.pure-u-sm-2-5{width:40%}.pure-u-sm-10-24,.pure-u-sm-5-12{width:41.6667%}.pure-u-sm-11-24{width:45.8333%}.pure-u-sm-1-2,.pure-u-sm-12-24{width:50%}.pure-u-sm-13-24{width:54.1667%}.pure-u-sm-14-24,.pure-u-sm-7-12{width:58.3333%}.pure-u-sm-3-5{width:60%}.pure-u-sm-15-24,.pure-u-sm-5-8{width:62.5%}.pure-u-sm-16-24,.pure-u-sm-2-3{width:66.6667%}.pure-u-sm-17-24{width:70.8333%}.pure-u-sm-18-24,.pure-u-sm-3-4{width:75%}.pure-u-sm-19-24{width:79.1667%}.pure-u-sm-4-5{width:80%}.pure-u-sm-20-24,.pure-u-sm-5-6{width:83.3333%}.pure-u-sm-21-24,.pure-u-sm-7-8{width:87.5%}.pure-u-sm-11-12,.pure-u-sm-22-24{width:91.6667%}.pure-u-sm-23-24{width:95.8333%}.pure-u-sm-1,.pure-u-sm-1-1,.pure-u-sm-24-24,.pure-u-sm-5-5{width:100%}}@media screen and (min-width:48em){.pure-u-md-1,.pure-u-md-1-1,.pure-u-md-1-12,.pure-u-md-1-2,.pure-u-md-1-24,.pure-u-md-1-3,.pure-u-md-1-4,.pure-u-md-1-5,.pure-u-md-1-6,.pure-u-md-1-8,.pure-u-md-10-24,.pure-u-md-11-12,.pure-u-md-11-24,.pure-u-md-12-24,.pure-u-md-13-24,.pure-u-md-14-24,.pure-u-md-15-24,.pure-u-md-16-24,.pure-u-md-17-24,.pure-u-md-18-24,.pure-u-md-19-24,.pure-u-md-2-24,.pure-u-md-2-3,.pure-u-md-2-5,.pure-u-md-20-24,.pure-u-md-21-24,.pure-u-md-22-24,.pure-u-md-23-24,.pure-u-md-24-24,.pure-u-md-3-24,.pure-u-md-3-4,.pure-u-md-3-5,.pure-u-md-3-8,.pure-u-md-4-24,.pure-u-md-4-5,.pure-u-md-5-12,.pure-u-md-5-24,.pure-u-md-5-5,.pure-u-md-5-6,.pure-u-md-5-8,.pure-u-md-6-24,.pure-u-md-7-12,.pure-u-md-7-24,.pure-u-md-7-8,.pure-u-md-8-24,.pure-u-md-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-md-1-24{width:4.1667%}.pure-u-md-1-12,.pure-u-md-2-24{width:8.3333%}.pure-u-md-1-8,.pure-u-md-3-24{width:12.5%}.pure-u-md-1-6,.pure-u-md-4-24{width:16.6667%}.pure-u-md-1-5{width:20%}.pure-u-md-5-24{width:20.8333%}.pure-u-md-1-4,.pure-u-md-6-24{width:25%}.pure-u-md-7-24{width:29.1667%}.pure-u-md-1-3,.pure-u-md-8-24{width:33.3333%}.pure-u-md-3-8,.pure-u-md-9-24{width:37.5%}.pure-u-md-2-5{width:40%}.pure-u-md-10-24,.pure-u-md-5-12{width:41.6667%}.pure-u-md-11-24{width:45.8333%}.pure-u-md-1-2,.pure-u-md-12-24{width:50%}.pure-u-md-13-24{width:54.1667%}.pure-u-md-14-24,.pure-u-md-7-12{width:58.3333%}.pure-u-md-3-5{width:60%}.pure-u-md-15-24,.pure-u-md-5-8{width:62.5%}.pure-u-md-16-24,.pure-u-md-2-3{width:66.6667%}.pure-u-md-17-24{width:70.8333%}.pure-u-md-18-24,.pure-u-md-3-4{width:75%}.pure-u-md-19-24{width:79.1667%}.pure-u-md-4-5{width:80%}.pure-u-md-20-24,.pure-u-md-5-6{width:83.3333%}.pure-u-md-21-24,.pure-u-md-7-8{width:87.5%}.pure-u-md-11-12,.pure-u-md-22-24{width:91.6667%}.pure-u-md-23-24{width:95.8333%}.pure-u-md-1,.pure-u-md-1-1,.pure-u-md-24-24,.pure-u-md-5-5{width:100%}}@media screen and (min-width:64em){.pure-u-lg-1,.pure-u-lg-1-1,.pure-u-lg-1-12,.pure-u-lg-1-2,.pure-u-lg-1-24,.pure-u-lg-1-3,.pure-u-lg-1-4,.pure-u-lg-1-5,.pure-u-lg-1-6,.pure-u-lg-1-8,.pure-u-lg-10-24,.pure-u-lg-11-12,.pure-u-lg-11-24,.pure-u-lg-12-24,.pure-u-lg-13-24,.pure-u-lg-14-24,.pure-u-lg-15-24,.pure-u-lg-16-24,.pure-u-lg-17-24,.pure-u-lg-18-24,.pure-u-lg-19-24,.pure-u-lg-2-24,.pure-u-lg-2-3,.pure-u-lg-2-5,.pure-u-lg-20-24,.pure-u-lg-21-24,.pure-u-lg-22-24,.pure-u-lg-23-24,.pure-u-lg-24-24,.pure-u-lg-3-24,.pure-u-lg-3-4,.pure-u-lg-3-5,.pure-u-lg-3-8,.pure-u-lg-4-24,.pure-u-lg-4-5,.pure-u-lg-5-12,.pure-u-lg-5-24,.pure-u-lg-5-5,.pure-u-lg-5-6,.pure-u-lg-5-8,.pure-u-lg-6-24,.pure-u-lg-7-12,.pure-u-lg-7-24,.pure-u-lg-7-8,.pure-u-lg-8-24,.pure-u-lg-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-lg-1-24{width:4.1667%}.pure-u-lg-1-12,.pure-u-lg-2-24{width:8.3333%}.pure-u-lg-1-8,.pure-u-lg-3-24{width:12.5%}.pure-u-lg-1-6,.pure-u-lg-4-24{width:16.6667%}.pure-u-lg-1-5{width:20%}.pure-u-lg-5-24{width:20.8333%}.pure-u-lg-1-4,.pure-u-lg-6-24{width:25%}.pure-u-lg-7-24{width:29.1667%}.pure-u-lg-1-3,.pure-u-lg-8-24{width:33.3333%}.pure-u-lg-3-8,.pure-u-lg-9-24{width:37.5%}.pure-u-lg-2-5{width:40%}.pure-u-lg-10-24,.pure-u-lg-5-12{width:41.6667%}.pure-u-lg-11-24{width:45.8333%}.pure-u-lg-1-2,.pure-u-lg-12-24{width:50%}.pure-u-lg-13-24{width:54.1667%}.pure-u-lg-14-24,.pure-u-lg-7-12{width:58.3333%}.pure-u-lg-3-5{width:60%}.pure-u-lg-15-24,.pure-u-lg-5-8{width:62.5%}.pure-u-lg-16-24,.pure-u-lg-2-3{width:66.6667%}.pure-u-lg-17-24{width:70.8333%}.pure-u-lg-18-24,.pure-u-lg-3-4{width:75%}.pure-u-lg-19-24{width:79.1667%}.pure-u-lg-4-5{width:80%}.pure-u-lg-20-24,.pure-u-lg-5-6{width:83.3333%}.pure-u-lg-21-24,.pure-u-lg-7-8{width:87.5%}.pure-u-lg-11-12,.pure-u-lg-22-24{width:91.6667%}.pure-u-lg-23-24{width:95.8333%}.pure-u-lg-1,.pure-u-lg-1-1,.pure-u-lg-24-24,.pure-u-lg-5-5{width:100%}}@media screen and (min-width:80em){.pure-u-xl-1,.pure-u-xl-1-1,.pure-u-xl-1-12,.pure-u-xl-1-2,.pure-u-xl-1-24,.pure-u-xl-1-3,.pure-u-xl-1-4,.pure-u-xl-1-5,.pure-u-xl-1-6,.pure-u-xl-1-8,.pure-u-xl-10-24,.pure-u-xl-11-12,.pure-u-xl-11-24,.pure-u-xl-12-24,.pure-u-xl-13-24,.pure-u-xl-14-24,.pure-u-xl-15-24,.pure-u-xl-16-24,.pure-u-xl-17-24,.pure-u-xl-18-24,.pure-u-xl-19-24,.pure-u-xl-2-24,.pure-u-xl-2-3,.pure-u-xl-2-5,.pure-u-xl-20-24,.pure-u-xl-21-24,.pure-u-xl-22-24,.pure-u-xl-23-24,.pure-u-xl-24-24,.pure-u-xl-3-24,.pure-u-xl-3-4,.pure-u-xl-3-5,.pure-u-xl-3-8,.pure-u-xl-4-24,.pure-u-xl-4-5,.pure-u-xl-5-12,.pure-u-xl-5-24,.pure-u-xl-5-5,.pure-u-xl-5-6,.pure-u-xl-5-8,.pure-u-xl-6-24,.pure-u-xl-7-12,.pure-u-xl-7-24,.pure-u-xl-7-8,.pure-u-xl-8-24,.pure-u-xl-9-24{display:inline-block;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-xl-1-24{width:4.1667%}.pure-u-xl-1-12,.pure-u-xl-2-24{width:8.3333%}.pure-u-xl-1-8,.pure-u-xl-3-24{width:12.5%}.pure-u-xl-1-6,.pure-u-xl-4-24{width:16.6667%}.pure-u-xl-1-5{width:20%}.pure-u-xl-5-24{width:20.8333%}.pure-u-xl-1-4,.pure-u-xl-6-24{width:25%}.pure-u-xl-7-24{width:29.1667%}.pure-u-xl-1-3,.pure-u-xl-8-24{width:33.3333%}.pure-u-xl-3-8,.pure-u-xl-9-24{width:37.5%}.pure-u-xl-2-5{width:40%}.pure-u-xl-10-24,.pure-u-xl-5-12{width:41.6667%}.pure-u-xl-11-24{width:45.8333%}.pure-u-xl-1-2,.pure-u-xl-12-24{width:50%}.pure-u-xl-13-24{width:54.1667%}.pure-u-xl-14-24,.pure-u-xl-7-12{width:58.3333%}.pure-u-xl-3-5{width:60%}.pure-u-xl-15-24,.pure-u-xl-5-8{width:62.5%}.pure-u-xl-16-24,.pure-u-xl-2-3{width:66.6667%}.pure-u-xl-17-24{width:70.8333%}.pure-u-xl-18-24,.pure-u-xl-3-4{width:75%}.pure-u-xl-19-24{width:79.1667%}.pure-u-xl-4-5{width:80%}.pure-u-xl-20-24,.pure-u-xl-5-6{width:83.3333%}.pure-u-xl-21-24,.pure-u-xl-7-8{width:87.5%}.pure-u-xl-11-12,.pure-u-xl-22-24{width:91.6667%}.pure-u-xl-23-24{width:95.8333%}.pure-u-xl-1,.pure-u-xl-1-1,.pure-u-xl-24-24,.pure-u-xl-5-5{width:100%}}</style><style type=text/css media=screen>:root{--color:#484848;--color-footnote:#575757;--color-footer-content:#bbb;--background-color:rgb(252, 252, 252);--background-color-code:rgb(240, 240, 240);--background-color-toggle-content:rgb(249, 249, 249);--link-color:#c05b4d;--link-color-hover:#a5473a;--list-link-color:#336699;--border-navbar-and-footer:#e3e3e3}</style><style type=text/css media=screen>html{min-height:100%;width:100%;position:relative}body{background-color:#fcfcfc;background-color:var(--background-color);color:#484848;color:var(--color)}a{text-decoration:none}kbd,pre,code,samp{background-color:#f0f0f0;background-color:var(--background-color-code)}.nav-menu{margin-top:5px;padding-bottom:5px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#e3e3e3;border-bottom-color:var(--border-navbar-and-footer)}.pure-menu-heading{text-transform:none;font-size:large}.pure-menu-link:hover{background-color:unset}.header{text-align:left;color:#484848;color:var(--color);margin-bottom:.5em}.header ul li{height:auto}.header ul li a{font-weight:700;color:#484848;color:var(--color);font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.header{font-weight:700;color:#484848;color:var(--color);font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.site-title{color:#484848;color:var(--color);text-transform:none;font-weight:400;font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.pull-right{float:right}.posts-name{text-transform:capitalize;font-weight:700;padding-left:1em;margin-top:1em;font-family:source sans pro,helveticaneue,helvetica neue,Helvetica,Arial,sans-serif}.posts{font-family:verdana,arial,helvetica,sans-serif;list-style-type:none;padding-left:1em}.posts li p{margin-top:0}.posts li{margin-bottom:1em}.posts li>a{color:#369;color:var(--list-link-color);text-decoration:none}.post-list{font-size:large}.footnote{font-family:verdana,arial,helvetica,sans-serif;color:#575757;color:var(--color-footnote);font-size:.75em;margin-bottom:0}.footnote a{color:#575757;color:var(--color-footnote)}.footnote a:hover{text-decoration:underline;color:#369;color:var(--list-link-color)}.footer{position:absolute;z-index:2;height:auto;width:100%;bottom:0}.footer-content{border-top-width:1px;border-top-style:solid;border-top-color:#e3e3e3;border-top:1px solid var(--border-navbar-and-footer);font-size:80%;color:#bbb;color:var(--color-footer-content)}.footer-content a{color:#575757;color:var(--color-footnote)}.footer-content ul{height:auto;margin-top:0;margin-bottom:0;display:inline-block;padding-left:0}#TableOfContents>ul{list-style:none;margin:0;padding:0}#gototop-btn{display:inline-block}#foot-name{color:#484848;color:var(--color);text-transform:none}#foot-copyright{padding-left:1em;padding-bottom:.5em;margin:0}.post{font-family:proxima-nova,helvetica neue,Helvetica,Roboto,Arial,sans-serif;color:#484848;color:var(--color);letter-spacing:normal;padding-left:.5em}.post h1,h2,h3,h4,h5,h6{font-weight:700;letter-spacing:normal}.post-content{z-index:9;overflow:auto;padding:0;padding-bottom:3em;font-size:16px;line-height:1.4}.post-content img{max-width:100%;height:auto}.post-content pre{padding:.5em}.post a{color:#c05b4d;color:var(--link-color);text-decoration:none}.post a:hover{color:#a5473a;color:var(--link-color-hover);text-decoration:underline}.post h1{font-size:28px}.post h2{font-size:25px}.post h3{font-size:23px}.post h4{font-size:21px}.post h5{font-size:19px}.post h6{font-size:18px}.post-title{margin-top:0;margin-bottom:1em}.post-title h1{font-weight:700;font-size:39px;line-height:40px;margin-top:0;margin-bottom:0}@media screen and (max-width:768px){.desktop{display:none}.mobile{display:block}#toggle-btn{display:inline-block;float:right;padding:.5em 1em;text-decoration:none;color:#484848;color:var(--color);font-weight:700}#toggle-content li{clear:both;height:auto;background-color:#f9f9f9;background-color:var(--background-color-toggle-content)}#toggle-home{display:inline-block}}@media screen and (min-width:769px){.mobile{display:none}.desktop{display:block}}</style><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon></head><body><div class="header pure-g"><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div><div class="pure-u-11-12 pure-u-md-20-24 pure-u-lg-7-12"><div class="desktop pure-menu pure-menu-horizontal nav-menu"><a href=/ class="site-title pure-menu-heading">随记</a><ul class="pure-menu-list pull-right"><li class=pure-menu-item><a href=/categories/development/ class=pure-menu-link>Development</a></li><li class=pure-menu-item><a href=/categories/os/ class=pure-menu-link>OS</a></li><li class=pure-menu-item><a href=/categories/reading/ class=pure-menu-link>Reading</a></li><li class=pure-menu-item><a href=/about/ class=pure-menu-link>About</a></li></ul></div><div class="mobile pure-menu nav-menu"><a href=/ class="site-title pure-menu-heading" id=toggle-home>随记</a>
<a href=# id=toggle-btn>&#9776;</a><ul class=pure-menu-list id=toggle-content style=display:none><li class=pure-menu-item><a href=/categories/development/ class=pure-menu-link>Development</a></li><li class=pure-menu-item><a href=/categories/os/ class=pure-menu-link>OS</a></li><li class=pure-menu-item><a href=/categories/reading/ class=pure-menu-link>Reading</a></li><li class=pure-menu-item><a href=/about class=pure-menu-link>About</a></li></ul></div></div><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div></div><div class=pure-g><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div><div class="pure-u-11-12 pure-u-md-20-24 pure-u-lg-7-12"><div class=post><div class=post-title><p class=footnote><time datetime="2019-01-03 23:27:02 +0800 CST">2019-01-03
</time>|
tags: [ <a href=/tags/unicode>Unicode</a> ]
categories: [ <a href=/categories/reading>Reading</a> ]</p><h1>Unicode 11.0 核心规范笔记</h1></div><div class=post-content><nav id=TableOfContents><ul><li><a href=#导言>导言</a></li><li><a href=#concepts-architecture-conformance-and-guidelines>Concepts, Architecture, Conformance, and Guidelines</a><ul><li><a href=#1-introduction>1. Introduction</a></li><li><a href=#2-general-structure>2. General Structure</a></li><li><a href=#3-conformance>3. Conformance</a></li><li><a href=#4-character-properties>4. Character Properties</a></li><li><a href=#5-implementation-guidelines>5. Implementation Guidelines</a></li></ul></li><li><a href=#character-block-descriptions>Character Block Descriptions</a><ul><li><a href=#6-writing-systems-and-punctuation>6. Writing Systems and Punctuation</a></li><li><a href=#78--europe>7~8: Europe</a></li><li><a href=#910-middle-east>9~10: Middle East</a></li><li><a href=#11-cuneiform-and-hieroglyphs>11. Cuneiform and Hieroglyphs</a></li><li><a href=#1215-sourth-and-central-asia>12~15: Sourth and Central Asia</a></li><li><a href=#16-southeast-asia>16. Southeast Asia</a></li><li><a href=#17-indonesia-and-oceania>17. Indonesia and Oceania</a></li><li><a href=#18-east-asia>18. East Asia</a></li><li><a href=#19-africa>19. Africa</a></li><li><a href=#20-americas>20. Americas</a></li><li><a href=#21-national-systems>21. National Systems</a></li><li><a href=#22-symbols>22. Symbols</a></li><li><a href=#23-special-areas-and-format-characters>23. Special Areas and Format Characters</a></li></ul></li><li><a href=#code-chart>Code Chart</a><ul><li><a href=#24-about-the-code-charts>24. About the Code Charts</a></li></ul></li><li><a href=#appendices>Appendices</a></li></ul></nav><h2 id=导言>导言</h2><p>前几天以戏谑的语气写了些 <a href=../you-dont-understand-unicode/>Unicode 规范的坑点</a>，了解有限，很不严谨，Unicode 技术委员会成员<a href=https://www.zhihu.com/people/lianghai/activities>梁海</a>同学指出概念不清，建议读一下 <a href=http://www.unicode.org/versions/Unicode11.0.0/>Unicode Core Spec</a>，本文是对 Core Spec 的一点笔记。</p><hr><p>由于 Core Spec 很长，这份笔记也会比较长，所以先总结一点个人猜度的编程语言中 char 和 string 的设计考虑。</p><ol><li><p>在 Unicode 标准中，关于“字符”有四个术语，在下面笔记中有更多解释，如果没有特别说明，Unicode 标准中的“字符”指 encoded character(参考 Core Spec 3.4 节 D12 定义)：</p><ol><li><strong>abstract character</strong> 指概念上的字符；</li><li><strong>encoded character</strong> 是其编号映射形式，一个 abstract character 对应到一个<strong>或者多个</strong> encoded characters（为了与其它字符集标准兼容以及有等价字符，所以有重复编号），一个 encoded character 对应到一个<strong>或者多个</strong> assigned character（完整的说是指 assigned character code point)；</li><li><strong>assigned character</strong>: 指用来编号抽象字符的那些 code point，具体范围见下面的 Venn 图，注意这个术语并不是指“抽象字符”或者“编号的字符”；</li><li><strong>grapheme cluster</strong>: 指人直觉感知所认为的单个字符，对应一个<strong>或者多个</strong> encoded characters，也就对应一个<strong>或者多个</strong> assigned character。注意 grapheme cluster 的划分是跟具体语言有关的，可以在 Unicode Text Segmentation 规范基础上自定义。</li></ol></li><li><p>由于 code point 数字超过了 2 bytes 编号范围，所以 <strong>char 类型至少得 4 bytes</strong>；</p></li><li><p>Rust char 类型是 unicode scalar value，要非常清醒这是工程上的权衡设计，这个类型离常识的“字符”是有差距的，<strong>表达不了</strong>多 code points 的 encoded character；</p></li><li><p>Rust string 类型是 UTF-8 编码的 Unicode code point 序列，注意完整的 code point 范围并不全用来编码抽象字符，所以这个类型离常识的“字符串”也是有差距的。</p></li><li><p>Swift 的 Character 是 grapheme cluster，比 encoded character 还高一个层次（一个 grapheme cluster 对应一个或多个 encoded characters)，Swift 的 String 默认是 grapheme cluster 为单位，但也提供 UTF-8/16/32 视图，可以逐 code point 处理。</p></li><li><p>Rust 的 Unicode 支持比较底层，Swift 的则比较高层，这跟二者的设计初衷可能有关系，前者定位系统级语言，后者定位面向用户的高层应用开发语言，对于普通程序员来说，Swift 更容易写出正确的 Unicode 兼容程序，而 Rust 需要时刻小心 char 类型并不是总能表达一个 encoded character，你很可能要借助 Rust 的 unicode-segmentation 库来处理文本。而 Rust 的好处是用来写 Web 浏览器这种底层软件，在字符处理上自由度更大，效率更高。</p></li></ol><hr><h2 id=concepts-architecture-conformance-and-guidelines>Concepts, Architecture, Conformance, and Guidelines</h2><h3 id=1-introduction>1. Introduction</h3><p>这章没有非常明确的说明 &ldquo;character&rdquo; 的定义，这个概念在前三章中断续穿插的讲述。</p><ul><li>Unicode 字符有三种 encoding forms: UTF-32, UTF-16, UTF-8；</li><li>Unicode 和 ISO/IEC 10646 的字符编码是一一对应的；</li><li>Unicode 可以最多编码 1114112 个字符(也即 U+0000 ~ U+10FFFF)，常用的都在 U+0000 ~ U+FFFF 这个范围（也即 BMP, Basic Multilingual Plane），目前 Unicode 11.0 编码了 137374 个字符；</li><li>Unicode 标准的范围<ul><li>字符编号和编码</li><li>断词，断行，在什么地方断开，在什么地方加连字符(hyphen)</li><li>不同语言里的文本排序</li><li>不同区域(locale)里的数字、日期、时间等格式化</li><li>不同区域(locale)里的字符大小写，比如在 tr_TR(土耳其) 区域里，对于大写字母 I (U+0049)的是 İ (U+0130, 大写 I 上有一点)，而对应小写字母 i (U+0069) 的是 ı (U+0131, 小写 i 上没有点)</li><li>从右向左书写的语言如何显示</li><li>在南亚等地区里人可识别的字符有类似笔画的切分、组合、重排序问题，如何显示</li><li>处理相似字符带来的安全隐患</li></ul></li><li>Unicode 只定义字符如何解释，不定义字形(glyph)如何渲染</li><li>encoded character: 对应一个或多个 code point</li><li>text element: 一个或多个 encoded character</li></ul><h3 id=2-general-structure>2. General Structure</h3><ul><li>在不同的文本处理场合，text element 有不同含义；<ul><li>传统德语正字法里，ck 是断字(hyphenation)的 text element，但不是排序的 text element</li><li>在西班牙语中，ll 是排序的 text element（在 l 和 m 之间），但不是渲染的 text element</li><li>在英语中，A 和 a 在渲染时不一样，但在搜索时往往看成一样的（忽略大小写）</li></ul></li><li>assigned character: 对应一个 code point，见第三章的解释；<img src=text-elements-and-characters.png alt="Text Elements and Characters"></li><li><strong>人感知为单个字符</strong>的 text element 称为 grapheme cluster，参考 Unicode Standard Annex #29<ul><li><a href=https://doc.rust-lang.org/book/ch08-02-strings.html>Rust</a> 编程语言中，char 类型指一个 <a href=http://unicode.org/glossary/#unicode_scalar_value>unicode scalar value</a> (指除了 surrogate code points 之外的 code points，编号 0x0 ~ 0x10FFFF), String 类型则是 UTF-8 编码的字节序列。</li><li><a href=https://docs.swift.org/swift-book/LanguageGuide/StringsAndCharacters.html>Swift</a> 编程语言中，Character 类型指一个 <a href=http://unicode.org/glossary/#grapheme_cluster>grapheme cluster</a>，对应一个或者多个 unicode scalar value, String 类型的内部编码格式没有暴露出来，但主要接口是面向 grapheme cluster，而且其 &ldquo;==&rdquo; 操作符考虑了 <a href=http://unicode.org/reports/tr15/#Canon_Compat_Equivalence>canonical equivalence</a>, 另外 Swift 给 String 类型提供了属性 &ldquo;utf8&rdquo;, &ldquo;utf16&rdquo;, &ldquo;unicodeScalars&rdquo; 来按照 UTF-8，UTF-16，UTF-32 的 code unit 访问。</li><li>Unicode 创始人之一 以及 Unicode 联盟主席 <a href=https://en.wikipedia.org/wiki/Mark_Davis_(Unicode)>Mark E. Davis</a> 赞成 Swift 的类型设计，而梁海不赞成。赞成一派<strong>大概</strong>是因为文本处理大部分场景下按 grapheme cluster 是最接近正确的，如果默认按 unicode scalar value，绝大部分程序员都不知道 grapheme cluster 概念，容易出错；而反对一派<strong>大概</strong>是因为 grapheme cluster 是比 abstract/encoded character 更高级的概念，对应的 Annex #29 规范不断演化，作为函数库实现更容易升级，而且 grapheme cluster 只是众多 text element 解释中的一种，默认按这个解释并不总是合适，会降低字符串处理性能。<strong>个人还是倾向 Swift 的方式多点，毕竟 Swift 也提供了按照 code point 访问字符串的接口，并不失灵活性。</strong></li><li>在 3.4 节里准确定义了 “character” 相关的概念。</li></ul></li><li>Code point 七种分类(type)<ul><li>Graphic: 包含 letter(L)，mark(M)，number(N)，punctuation(P)，symbol(S), space(Zs) 这些 category；</li><li>Format: 不可见但是影响相邻字符，比如分行符，分段符。包含 Cf, Zl, Zp 三个 category；</li><li>Control: Cc，与 ISO/IEC 2022 兼容的 65 个 code point(U+0000<del>U+001F 共 32 个, U+007F</del>U+009F 共 33 个)；</li><li>Private-use: Co, 三个连续 code points 段，允许自定义抽象字符映射关系（互操作性需要自行协商）；</li><li>Surrogate: Cs，2048 个 code points，用于 UTF-16；</li><li>Noncharacter: Cn, 66 个 code points, U+FDD0~U+FDFF(32 个), 以及以 FFFE 和 FFFF 结尾的 code points(2 * 17 plane = 34 个)；这些属于 Unicode 内部使用，比如 BOM U+FEFF，如果输入文本包含 U+FFFE，由于 U+FFFE 不是有效字符，所以可以用于表明字节序；</li><li>Reserved: Cn，尚未用到的 code points；</li></ul></li><li>3 种 encoding forms: UTF-/8/16/32，7 种 encoding schemes: UTF-8/16/16BE/16LE/32/32BE/32LE；</li><li>C#，Java，JavaScript 的字符串是 16-bit code unit 的数组，不一定是合法 UTF-16，这是为了效率考虑，不必每次字符串操作都考虑 surrogate pair 检查，而且有时候输入法以 16-bit 为单位输入，因此 string 中数据可以随时都不是合法的 UTF-16，程序在处理时可以将单独出现的 surrogate code point 替换成 U+FFFD replacement character，也可以报错；</li><li>17 个 plane <a href=http://www.unicode.org/roadmaps/>分配情况</a>:<ul><li>plane 0, <strong>Basic Multilingual Plane(BMP)</strong>, U+0000 ~ U+FFFF，包含 latin-1(U+0000<del>U+00FF), general script, punctuation, symbols, <strong>CJK</strong>, Hangul, Surrogate(U+D800</del>U+DFFF), Private-use(U+E000<del>U+F8FF, 6400 个 code points), compatibility and specials (U+F900</del>U+FFFF)</li><li>plane 1, <strong>Supplementary Multilingual Plane(SMP)</strong>, U+10000~U+1FFFF, 比较特别的有音符，数学符号，麻将/多米诺/扑克/中国象棋，情感符，交通标志</li><li>plane 2, <strong>Supplementary Ideographic Plane(SIP)</strong>, U+20000~U+2FFFF, <strong>CJK</strong></li><li>plane 3, <strong>Tertiary Ideographic Plane(TIP)</strong>, U+30000~U+3FFFF, <strong>CJK</strong>，小篆，甲骨文，金文，战国时代文字</li><li>plane 14, <strong>Supplementary Special-purpose Plane(SSP)</strong>, tag characters, supplementary variation selection characters</li><li>plane 15, 16: private use，包含 65536 * 2 - 4 = 131068 个 code point，排除四个以 FFFE 和 FFFF 结尾的 code point。</li></ul></li><li>文字书写方向：<ul><li>从左往右从上往下(现代主流 )</li><li>左右混杂从上往下(阿拉巴语，希伯来语，数字从右往左，但是数字从左往右）</li><li>从上往下从右往左(东亚，外来字符会旋转 90 度)</li><li>从上往下从左往右(蒙古语)</li><li>左右轮换从上往下(古希腊语)<img src=writing-directions.png alt="Writing Directions"></li></ul></li><li>除了文字内在的书写方向，Unicode 也引入了 U+202D LEFT-TO-RIGHT OVERRIDE 和 U+202E RIGHT-TO-LEFT OVERRIDE 两个格式字符以显式标明书写方向。</li><li><a href=https://en.wikipedia.org/wiki/Combining_character>Combining Character</a> 大概是 Unicode 标准里最魔幻的字符了，在 2.11 Combining Characters 和 7.9 Combing Marks 都有讲述。当 nonspacing combining marks 需要单独显示时，以前往往在 U+0020 SPACE 或者 U+00A0 NO-BREAK SPACE 后面添加 combining marks 的方式，现在这两种方式都不推荐了，尤其前者，因为在 XML、HTML 规范里有精简空格的行为。在 Unicode 标准中使用附加在 ◌ (U+25CC DOTTED CIRCLE) 后面的办法，在左右双向混杂排版的环境下，可以把 combining marks 包围在一对 U+200E(LEFT TO RIGHT MARK) 或者 U+200F (RIGHT TO LEFT MARK) 中，以避免 combining marks 显示错位。部分 diacritical marks 有 spacing character 版本。</li><li>Canonically equivalent, compatiable equivalent, NFD/NFC/NFKD/NFKC，这些在<a href=../you-dont-understand-unicode/>《其实你并不懂 Unicode》</a>中讲过。 在注重安全避免字符混淆的场合下，比如用户名，建议使用 compatible equivalence。</li></ul><h3 id=3-conformance>3. Conformance</h3><ul><li><p>对应单个 code point</p><ul><li><p><a href=http://unicode.org/glossary/#code_point>code point</a>: 0x0 ~ 0x10FFFF 的数字编号，分为七种：graphic, format, control, private-use, surrogate, noncharacter, reserved；</p></li><li><p><a href=http://unicode.org/glossary/#unicode_scalar_value>unicode scalar value</a>: 排除 surrogate code point 后的 code point；</p></li><li><p><a href=http://unicode.org/glossary/#assigned_code_point>assigned</a>/<a href=http://unicode.org/glossary/#designated_code_point>designated</a> code point: 指分配给 abstract character, surrogate, noncharacters 的 code point. 这个集合排除了 reserved code points；</p></li><li><p><a href=http://unicode.org/glossary/#assigned_character>assigned character</a>: 指分配给 abstract character 的 code point, 包含 graphic, format, control, private-use 四种 code points；</p></li><li><p>包含关系：</p><p><img src=characters-and-encoding.svg alt="Characters and Encoding"></p></li></ul></li><li><p>对应一个或多个 assigned character (注意不包括 surrogate, noncharacter, reserved code points)</p><ul><li><p><a href=http://unicode.org/glossary/#abstract_character>abstract character</a>: 指概念上的字符，本身并没有编号，只是有个名字，比如 LATIN CAPITAL LETTER A。</p></li><li><p><a href=http://unicode.org/glossary/#grapheme_cluster>grapheme cluster</a>: 人可以识别、区分的字符</p></li><li><p><strong>abstract character 未必与 grapheme cluster 一一对应</strong>，比如 kʷ 可以看成单个 graphme cluster，第二个字符是 U+02B7 <a href=https://en.wikipedia.org/wiki/Spacing_Modifier_Letters>Modifier Letter Small W</a>，比如斯洛伐克语里 &ldquo;ch&rdquo; 是单个 grapheme cluster。</p></li><li><p><a href=http://unicode.org/glossary/#encoded_character>encoded</a>/<a href=http://unicode.org/glossary/#coded_character>coded</a> character 指 abstract character 和 code point 的<strong>映射关系</strong>。比如 U+00C5 Å 和 U+212B Å 是同一个 abstract character，这俩各自对应单个 code point；一个抽象字符可能对应多个 code points，比如 U+0047 LATIN CAPITAL LETTER G 和 U+0301 COMBINING ACUTE ACCENT 连在一起成为 Ǵ 。</p></li><li><p>abstract character, encoded character 和 code point 关系，左边圆框表示 abstract character，右边方框表示 code point:</p><p><img src=abstract-and-encoded-characters.png alt="Abstract and Encoded Characters"></p></li></ul></li><li><p>可以把 canonical-equivalent character sequences 当作不同的字符序列，也可以当作相同的字符序列。不能假设别人一定会区分 canonical-equivalent 字符序列。</p></li><li><p>关于 combining character sequence 和 grapheme cluster 的数据定义，这里 &ldquo;character&rdquo; 一词应该是指 assigned character code point，而非 encoded character，因为 Core Spec 这一节 3.6 讲 &ldquo;Combination&rdquo;。个人理解这里 combining character sequence 就是多 code point 的 encoded character。</p><ul><li><strong>Graphic character</strong>: A character with the General Category of Letter (L), Combining Mark (M), Number (N), Punctuation (P), Symbol (S), or Space Separator (Zs).</li><li><strong>Base character</strong>: Any graphic character except for those with the General Category of Combining Mark (M).</li><li><strong>Extended base</strong>: Any base character,or any standard Korean syllable block，这里 Korean syllable block 指多个韩文字母拼成的韩文字（不懂韩文，基本就是汉字笔画组成汉字的感觉）</li><li><strong>Combining character</strong>: A character with the General Category of Combining Mark
(M)<ul><li>Spacing Combining Mark (Mc)</li><li>Nonspacing Mark (Mn or Me)</li><li>Enclosing Mark (Me)</li></ul></li><li><strong>Combining character sequence</strong>: A maximal character sequence consisting of either a <strong>base character</strong> followed by a sequence of one or more characters where each is a combining character, zero width joiner, or zero width non-joiner; or a sequence of one or more characters where each is a combining character, zero width joiner, or zero width non-joiner.</li><li><strong><u>Extended combining character sequence</u></strong>: A maximal character sequence consisting of either an <strong>extended base</strong> followed by a sequence of one or more characters where each is a combining character, zero width joiner, or zero width non-joiner ; or a sequence of one or more characters where each is a combining character, zero width joiner, or zero width non-joiner.</li><li><strong>Defective combining character sequence</strong>: A combining character sequence that does not start with a base character. 以 Combining Mark 开头的字符串，或者在 Control or Format character 之后紧接 Combining mark，这种序列是有缺陷的，因为未必了 Combining mark 的意图（它要附加在前面的 base character 上），但依然算是合法的字符序列。</li><li><strong>Grapheme base</strong>: A character with the property Grapheme_Base, or any standard Korean syllable block. <em>Characters with the property Grapheme_Base include all base characters(with the exception of U+FF9E..U+FF9F) plus most spacing marks.</em></li><li><strong>Grapheme extender</strong>: A character with the property Grapheme_Extend. <em>Grapheme extender characters consist of all nonspacing marks, zero width joiner, zero width non-joiner, U+FF9E halfwidth katakana voiced sound mark, U+FF9F halfwidth katakana semi-voiced sound mark, and a small number of spacing marks.</em> Grapheme base 和 Grapheme extender 两个集合是完全没有交集的。</li><li><strong>Grapheme cluster</strong>: 也称为 legacy grapheme cluster，指在 grapheme cluster boundary 之间的文本，grapheme cluster boundary 在 Unicode Standard Annex #29 &ldquo;Unicode Text Segmentation&rdquo; 中定义。<ul><li>Grapheme cluster 跟 extended combining character sequence 很像，后者是 extended base 加上 combining marks，包括 spacing 和 nonspacing mark； 但前者是 grapheme base 加上 nonspacing marks.</li><li>character sequence 主要用于 normalization, comparison, searching.</li><li>grapheme cluster 主要用于文本渲染、光标定位、文本选择，有时候也会用于比较和搜索。</li></ul></li><li><strong><u>Extended grapheme cluster</u></strong>: 指在 extended grapheme cluster boundary 之间的文本。Extended grapheme cluster 跟 extended combining character sequence 更像，它是 grapheme base 加上 combining marks，包括 spacing 和 nonspacing mark。</li><li>注意 combining character sequence 是确定的，但 grapheme cluster 则可以调整规范，比如把 kʷ 认为是单个 grapheme cluster，在斯洛伐克语里可以把 ch 认为是单个 grapheme。</li></ul></li></ul><h3 id=4-character-properties>4. Character Properties</h3><ul><li><p>UCD 包含两部分，<a href=https://www.unicode.org/Public/UCD/latest/ucd/UCD.zip>UCD.zip</a> 和 <a href=https://www.unicode.org/Public/UCD/latest/ucd/Unihan.zip>Unihan.zip</a>，后者包含了 CJK 表意字符的额外信息。</p></li><li><p>Property 名字的别名: <a href=https://www.unicode.org/Public/UCD/latest/ucd/PropertyAliases.txt>https://www.unicode.org/Public/UCD/latest/ucd/PropertyAliases.txt</a></p></li><li><p>Property 值的别名： <a href=https://www.unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt>https://www.unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt</a></p></li><li><p>UCD XML 版本便于使用： <a href=https://www.unicode.org/Public/UCD/latest/ucdxml/>https://www.unicode.org/Public/UCD/latest/ucdxml/</a> ，在 <a href=https://www.unicode.org/reports/tr42/tr42-23.html>Unicode Character Database in XML</a> 中描述</p></li><li><p>Case Mapping</p><ul><li>UnicodeData.txt</li><li>DerivedCoreProperties.txt</li><li>SpecialCasing.txt 单字符到多字符，上下文相关，locale 相关的大小写映射</li><li>CaseFolding.txt 忽略大小写比较时用到的 case folding 数据</li><li>PropList.txt</li></ul></li><li><p>UCD XML 中 char 标签的几个有趣属性: age, blk(block), gc(general category), sc(script), scx(script extension). 除了 char 标签外，还有 reserved, noncharacter, surrogate 三种标签。</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># 提取 char 标签</span>
</span></span><span style=display:flex><span>$ grep <span style=color:#4070a0>&#39;&lt;char &#39;</span> ucd.all.flat.xml | perl -lne <span style=color:#4070a0>&#39;@a= $_ =~ /\b((?:age|blk|gc|sc|scx)=\S+)/g; print join(&#34; &#34;, @a)&#39;</span> &gt; chars.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># 统计历次版本字符数</span>
</span></span><span style=display:flex><span>$ perl -lne <span style=color:#4070a0>&#39;print $1 if /age=&#34;(\S+)&#34;/&#39;</span> chars.txt | sort | uniq -c | sort -k 2,2 -n | perl -lane <span style=color:#4070a0>&#39;$total += $F[0]; print &#34;| $F[1] | $F[0] | $total |&#34;&#39;</span>
</span></span></code></pre></div></li><li><p>Unicode 历次版本字符数统计</p></li></ul><table class='pure-table pure-table-striped'><thead><tr><th style=text-align:center>版本</th><th style=text-align:right>新增</th><th style=text-align:right>总计</th></tr></thead><tbody><tr><td style=text-align:center>1.1</td><td style=text-align:right>27578</td><td style=text-align:right>27578</td></tr><tr><td style=text-align:center>2.0</td><td style=text-align:right>11375</td><td style=text-align:right>38953</td></tr><tr><td style=text-align:center>2.1</td><td style=text-align:right>2</td><td style=text-align:right>38955</td></tr><tr><td style=text-align:center>3.0</td><td style=text-align:right>10307</td><td style=text-align:right>49262</td></tr><tr><td style=text-align:center><strong>3.1</strong></td><td style=text-align:right><strong>44946</strong></td><td style=text-align:right>94208</td></tr><tr><td style=text-align:center>3.2</td><td style=text-align:right>1016</td><td style=text-align:right>95224</td></tr><tr><td style=text-align:center>4.0</td><td style=text-align:right>1226</td><td style=text-align:right>96450</td></tr><tr><td style=text-align:center>4.1</td><td style=text-align:right>1273</td><td style=text-align:right>97723</td></tr><tr><td style=text-align:center>5.0</td><td style=text-align:right>1369</td><td style=text-align:right>99092</td></tr><tr><td style=text-align:center>5.1</td><td style=text-align:right>1624</td><td style=text-align:right>100716</td></tr><tr><td style=text-align:center><strong>5.2</strong></td><td style=text-align:right><strong>6648</strong></td><td style=text-align:right>107364</td></tr><tr><td style=text-align:center>6.0</td><td style=text-align:right>2088</td><td style=text-align:right>109452</td></tr><tr><td style=text-align:center>6.1</td><td style=text-align:right>732</td><td style=text-align:right>110184</td></tr><tr><td style=text-align:center>6.2</td><td style=text-align:right>1</td><td style=text-align:right>110185</td></tr><tr><td style=text-align:center>6.3</td><td style=text-align:right>5</td><td style=text-align:right>110190</td></tr><tr><td style=text-align:center>7.0</td><td style=text-align:right>2834</td><td style=text-align:right>113024</td></tr><tr><td style=text-align:center><strong>8.0</strong></td><td style=text-align:right><strong>7716</strong></td><td style=text-align:right>120740</td></tr><tr><td style=text-align:center><strong>9.0</strong></td><td style=text-align:right><strong>7500</strong></td><td style=text-align:right>128240</td></tr><tr><td style=text-align:center><strong>10.0</strong></td><td style=text-align:right><strong>8518</strong></td><td style=text-align:right>136758</td></tr><tr><td style=text-align:center>11.0</td><td style=text-align:right>684</td><td style=text-align:right>137442</td></tr></tbody></table><ul><li>Unicode 历次版本新增字符超过 150 个的 Block</li></ul><table class='pure-table pure-table-striped'><thead><tr><th style=text-align:center>版本</th><th style=text-align:right>新增</th><th style=text-align:left>区块</th></tr></thead><tbody><tr><td style=text-align:center><strong>1.1</strong></td><td style=text-align:right><strong>20902</strong></td><td style=text-align:left><strong>CJK</strong></td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>593</td><td style=text-align:left>Arabic_PF_A</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>302</td><td style=text-align:left>CJK_Compat_Ideographs</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>249</td><td style=text-align:left>CJK_Compat</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>245</td><td style=text-align:left>Latin_Ext_Additional</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>242</td><td style=text-align:left>Math_Operators</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>240</td><td style=text-align:left>Jamo</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>233</td><td style=text-align:left>Greek_Ext</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>226</td><td style=text-align:left>Cyrillic</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>223</td><td style=text-align:left>Half_And_Full_Forms</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>202</td><td style=text-align:left>Enclosed_CJK</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>194</td><td style=text-align:left>Arabic</td></tr><tr><td style=text-align:center>1.1</td><td style=text-align:right>160</td><td style=text-align:left>Dingbats</td></tr><tr><td style=text-align:center><strong>2.0</strong></td><td style=text-align:right><strong>11172</strong></td><td style=text-align:left><strong>Hangul</strong></td></tr><tr><td style=text-align:center>2.0</td><td style=text-align:right>168</td><td style=text-align:left>Tibetan</td></tr><tr><td style=text-align:center><strong>3.0</strong></td><td style=text-align:right><strong>6582</strong></td><td style=text-align:left><strong>CJK_Ext_A</strong></td></tr><tr><td style=text-align:center><strong>3.0</strong></td><td style=text-align:right><strong>1165</strong></td><td style=text-align:left><strong>Yi_Syllables</strong></td></tr><tr><td style=text-align:center>3.0</td><td style=text-align:right>630</td><td style=text-align:left>UCAS</td></tr><tr><td style=text-align:center>3.0</td><td style=text-align:right>345</td><td style=text-align:left>Ethiopic</td></tr><tr><td style=text-align:center>3.0</td><td style=text-align:right>256</td><td style=text-align:left>Braille</td></tr><tr><td style=text-align:center>3.0</td><td style=text-align:right>214</td><td style=text-align:left>Kangxi</td></tr><tr><td style=text-align:center>3.0</td><td style=text-align:right>155</td><td style=text-align:left>Mongolian</td></tr><tr><td style=text-align:center><strong>3.1</strong></td><td style=text-align:right><strong>42711</strong></td><td style=text-align:left><strong>CJK_Ext_B</strong></td></tr><tr><td style=text-align:center>3.1</td><td style=text-align:right>991</td><td style=text-align:left>Math_Alphanum</td></tr><tr><td style=text-align:center>3.1</td><td style=text-align:right>542</td><td style=text-align:left>CJK_Compat_Ideographs_Sup</td></tr><tr><td style=text-align:center>3.1</td><td style=text-align:right>246</td><td style=text-align:left>Byzantine_Music</td></tr><tr><td style=text-align:center>3.1</td><td style=text-align:right>219</td><td style=text-align:left>Music</td></tr><tr><td style=text-align:center>3.2</td><td style=text-align:right>256</td><td style=text-align:left>Sup_Math_Operators</td></tr><tr><td style=text-align:center>4.0</td><td style=text-align:right>240</td><td style=text-align:left>VS_Sup</td></tr><tr><td style=text-align:center>5.0</td><td style=text-align:right>879</td><td style=text-align:left>Cuneiform</td></tr><tr><td style=text-align:center>5.1</td><td style=text-align:right>300</td><td style=text-align:left>Vai</td></tr><tr><td style=text-align:center><strong>5.2</strong></td><td style=text-align:right><strong>4149</strong></td><td style=text-align:left><strong>CJK_Ext_C</strong></td></tr><tr><td style=text-align:center><strong>5.2</strong></td><td style=text-align:right><strong>1071</strong></td><td style=text-align:left><strong>Egyptian_Hieroglyphs</strong></td></tr><tr><td style=text-align:center>6.0</td><td style=text-align:right>569</td><td style=text-align:left>Bamum_Sup</td></tr><tr><td style=text-align:center>6.0</td><td style=text-align:right>529</td><td style=text-align:left>Misc_Pictographs</td></tr><tr><td style=text-align:center>6.0</td><td style=text-align:right>222</td><td style=text-align:left>CJK_Ext_D</td></tr><tr><td style=text-align:center>7.0</td><td style=text-align:right>341</td><td style=text-align:left>Linear_A</td></tr><tr><td style=text-align:center>7.0</td><td style=text-align:right>213</td><td style=text-align:left>Mende_Kikakui</td></tr><tr><td style=text-align:center>7.0</td><td style=text-align:right>209</td><td style=text-align:left>Misc_Pictographs</td></tr><tr><td style=text-align:center><strong>8.0</strong></td><td style=text-align:right><strong>5762</strong></td><td style=text-align:left><strong>CJK_Ext_E</strong></td></tr><tr><td style=text-align:center>8.0</td><td style=text-align:right>672</td><td style=text-align:left>Sutton_SignWriting</td></tr><tr><td style=text-align:center>8.0</td><td style=text-align:right>583</td><td style=text-align:left>Anatolian_Hieroglyphs</td></tr><tr><td style=text-align:center>8.0</td><td style=text-align:right>196</td><td style=text-align:left>Early_Dynastic_Cuneiform</td></tr><tr><td style=text-align:center><strong>9.0</strong></td><td style=text-align:right><strong>6125</strong></td><td style=text-align:left><strong>Tangut</strong></td></tr><tr><td style=text-align:center>9.0</td><td style=text-align:right>755</td><td style=text-align:left>Tangut_Components</td></tr><tr><td style=text-align:center><strong>10.0</strong></td><td style=text-align:right><strong>7473</strong></td><td style=text-align:left><strong>CJK_Ext_F</strong></td></tr><tr><td style=text-align:center>10.0</td><td style=text-align:right>396</td><td style=text-align:left>Nushu</td></tr><tr><td style=text-align:center>10.0</td><td style=text-align:right>254</td><td style=text-align:left>Kana_Sup</td></tr></tbody></table><h3 id=5-implementation-guidelines>5. Implementation Guidelines</h3><ul><li><p>C11 和 C++11 包含了 uchar.h 和 cuchar 头文件，以包含 char16_t 和 char32_t 类型，前者用于 UTF-16，后者用于 UTF-32。C++11 还引入了 codecvt 头文件，但在 C++17 中废弃了。在字符和字符串字面量前面加 u8、u、U 分别表示 UTF8/16/32 编码，并且支持 \u 和 \U 转义符。<strong>不过 Clang 并不支持 uchar.h 头文件，不知何故</strong>。 这些新类型定义 ISO/IEC Technical Report 19769 &ldquo;Extensions for the programming language C to support new character types"里定义的，可惜的是 UTF-16 的引入早于这个技术报告，所有 C 编译器已经支持了 wchar_t 类型表示 UTF-16 的一个 code unit, 由于 wchar_t 类型到底包含多少个字节并没有标准化，所以不推荐再使用 wchar_t。</p></li><li><p>德语的 ß 大写是两个字母 SS (2008 年Unicode 5.1 引入了 U+1E9E ẞ LATIN CAPITAL LETTER SHARP S，但 ẞ 直到 2017 年才引入到德语正字法)，在 Java 里 <code>Character.toUpperCase('ß')</code> 还是 &lsquo;ß&rsquo;，而 <code>"ß".toUpperCase()</code> 能得到正确的 &ldquo;SS&rdquo;，另一个例子是 U+0390 ΐ 的大写形式包含三个 code points。所以稳妥的 Unicode 字符、字符串处理都应该用 &ldquo;string&rdquo; 类型，而把 &ldquo;char&rdquo; 当作底层的 code unit or code point 偶尔才需要使用。Swift 语言很贼，其 Character 类型就没有 uppercased() 方法，只有 String 类型有。</p></li><li><p>在 U+000D Carriage Return，U+000A Line Feed, U+0085 NExt Line, U+000B Vertical Tab, U+000C Form Feed 这些表达“换行”含义的字符之外，Unicode 又定义了 U+2028 Line Separator 和 U+2029 Paragraph Separator，以提供一种操作系统无关毫无歧义的行分隔符、段分隔符。</p></li><li><p>在编辑文本的时候，一个系统可能用 Backspace 来从后往前按照 code point 删除，Delete 则按 grapheme cluster 从前往后删除。这个区别是因为 base character 在前面，combining character 在后面，从前往后删会删除 base character，后面的 combining character 没有存在意义，所以要一并删除，而从后往前删除时，则先删除 combining character，剩下的 base character 和 combining character 组合在一起依然是有意义的。</p></li><li><p>大小写转换</p><ul><li><p>Titlecase 并不总是对首字母做 uppercase</p></li><li><p>大小写转换前后的 code point 个数未必相等</p></li><li><p>大小写转换并不一定可以互相转换，也即 <code>lowercase(uppercase(c))</code> 未必等于 c</p></li><li><p>大小写转换可能跟上下文相关，比如 U+03A3 &ldquo;Σ&rdquo; greek capital letter sigma 可能小写转换到 U+03C3 &ldquo;σ&rdquo; greek small letter sigma 和 U+03C2 &ldquo;ς&rdquo; greek small letter final sigma</p></li><li><p>大小写转换可能跟 locale 相关，比如 i 和 I 在土耳其语里的大小写转换</p></li><li><p>有的字符没有大小写之分，他们的 <code>uppercase(c)</code> 还是小写形式</p></li><li><p>忽略大小写的比较并不是全部转成小写再比较，而是采用 case folding 过程，根据 Unicode Character Database 里的 CaseFolding.txt 文件信息，把各种 case 的字符统一转换成一种 common case，然后再做二进制比较</p></li></ul></li></ul><h2 id=character-block-descriptions>Character Block Descriptions</h2><h3 id=6-writing-systems-and-punctuation>6. Writing Systems and Punctuation</h3><h3 id=78--europe>7~8: Europe</h3><h3 id=910-middle-east>9~10: Middle East</h3><h3 id=11-cuneiform-and-hieroglyphs>11. Cuneiform and Hieroglyphs</h3><h3 id=1215-sourth-and-central-asia>12~15: Sourth and Central Asia</h3><h3 id=16-southeast-asia>16. Southeast Asia</h3><h3 id=17-indonesia-and-oceania>17. Indonesia and Oceania</h3><h3 id=18-east-asia>18. East Asia</h3><h3 id=19-africa>19. Africa</h3><h3 id=20-americas>20. Americas</h3><h3 id=21-national-systems>21. National Systems</h3><h3 id=22-symbols>22. Symbols</h3><h3 id=23-special-areas-and-format-characters>23. Special Areas and Format Characters</h3><ul><li>control codes<ul><li>65 code points, 与 ISO/IEC 2022 的 C0 control codes 和 C1 control codes 兼容</li><li>包含 U+0000..U+001F(C0 controls), U+007F(DELETE), U+0080..U+009F(C1 controls)</li></ul></li><li>layout controls</li><li>deprecated format characters: U+206A ~ U+206F</li><li>variation selectors<ul><li>standardized variation sequences: <a href=https://www.unicode.org/Public/UCD/latest/ucd/StandardizedVariants.txt>StandardizedVariants.txt</a></li><li>emoji variation sequences</li><li>ideographic variation sequences</li></ul></li><li>private-use character</li><li>variation selectors</li><li>noncharacters</li><li>specials<ul><li>U+FEFF Byte Order Mark</li><li>U+FFF0 ~ U+FFF8 reserved</li><li>U+FFF9 ~ U+FFFB Annotation Characters<ul><li>&ldquo;U+FFF9 被标注文本 U+FFFA 标注 U+FFFB&rdquo;，用来对文本做一些标注，比如音标，支持的软件会渲染在被标注文本的上方。</li><li>U+FFF9 Interlinear annotation anchor</li><li>U+FFFA Interliner annotation separator</li><li>U+FFFB Interliner annotation termination</li></ul></li><li>U+FFFC ~ U+FFFD: Replacement characters<ul><li>U+FFFC OBJECT REPLACEMENT CHARACTER</li><li>U+FFFD REPLACEMENT CHARACTER</li></ul></li></ul></li><li>tag characters: U+E0000 ~ U+E007F</li></ul><h2 id=code-chart>Code Chart</h2><h3 id=24-about-the-code-charts>24. About the Code Charts</h3><h2 id=appendices>Appendices</h2></div></div></div><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div></div><div class="footer pure-g"><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div><div class="pure-u-11-12 pure-u-md-20-24 pure-u-lg-7-12"><div class=footer-content><div class="pure-menu pure-menu-horizontal"><ul><li class=pure-menu-item id=foot-name>© Yubao Liu</li></ul><a href=# class="pure-menu-link pull-right" id=gototop-btn>↑↑</a></div></div></div><div class="pure-u-1-24 pure-u-md-2-24 pure-u-lg-5-24"></div></div><script type=text/javascript>go(),window.addEventListener("resize",go);function go(){var e=document.querySelector(".desktop");document.documentElement.clientWidth>768?e.style.display="":e.style.display="none"}</script><script type=text/javascript>var a=document.querySelector("#toggle-btn"),b=document.querySelector("#toggle-content");a.addEventListener("click",function(){""==b.style.display?(b.style.display="none",a.innerHTML="☰"):(b.style.display="",a.innerHTML="X")})</script></body></html>